<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="simplepeng" /><link rel="canonical" href="http://simplepeng.com/blog/android/%E9%9A%8F%E7%AC%94/%E5%AD%A6%E4%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89LayoutManager/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>å­¦ä¼šè‡ªå®šä¹‰LayoutManager - blog</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u5b66\u4f1a\u81ea\u5b9a\u4e49LayoutManager";
        var mkdocs_page_input_path = "android/\u968f\u7b14/\u5b66\u4f1a\u81ea\u5b9a\u4e49LayoutManager.md";
        var mkdocs_page_url = "/blog/android/%E9%9A%8F%E7%AC%94/%E5%AD%A6%E4%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89LayoutManager/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/kotlin.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> blog
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">ä¸»é¡µ</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Android</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">FFmpeg</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../FFmpeg/%E7%BC%96%E8%AF%91%E5%8F%AF%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E7%9A%84FFmpeg/">ç¼–è¯‘å¯æ‰§è¡Œå‘½ä»¤çš„FFmpeg</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../FFmpeg/%E7%BC%96%E8%AF%91%E6%88%90%E5%8A%A8%E6%80%81%E5%BA%93/">ç¼–è¯‘æˆåŠ¨æ€åº“</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../FFmpeg/%E8%8E%B7%E5%8F%96%E8%A7%86%E9%A2%91%E9%A6%96%E5%B8%A7%E8%BD%ACBitmap%E5%B0%81%E9%9D%A2%E5%9B%BE/">è·å–è§†é¢‘é¦–å¸§è½¬Bitmapå°é¢å›¾</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Jetpack</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Jetpack/Android%E6%9E%B6%E6%9E%84%E7%BB%84%E4%BB%B6%E2%80%94LiveData/">Androidæ¶æ„ç»„ä»¶-LiveData</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Jetpack/Android%E6%9E%B6%E6%9E%84%E7%BB%84%E4%BB%B6%E2%80%94Room/">Androidæ¶æ„ç»„ä»¶-Room</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Jetpack/Android%E6%9E%B6%E6%9E%84%E7%BB%84%E4%BB%B6%E2%80%94ViewModel/">Androidæ¶æ„ç»„ä»¶â€”ViewModel</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Jetpack/Architecture%20Components%E4%BB%8B%E7%BB%8D/">Architecture Componentsä»‹ç»</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">NDK</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../NDK/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Cmakeå­¦ä¹ ç¬”è®°</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../NDK/JNI%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">JNIå­¦ä¹ ç¬”è®°</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../NDK/JNI%E8%BE%93%E5%87%BA%E5%8E%9F%E7%94%9FLOG/">JNIè¾“å‡ºåŸç”ŸLOG</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../NDK/%E7%BB%99%E5%B7%B2%E6%9C%89%E9%A1%B9%E7%9B%AE%E6%B7%BB%E5%8A%A0JNI%E6%94%AF%E6%8C%81/">ç»™å·²æœ‰é¡¹ç›®æ·»åŠ JNI/CMakeæ”¯æŒ</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">æºç åˆ†æ</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/%E6%88%91%E5%AF%B9Retrofit%E7%9A%84%E7%90%86%E8%A7%A3/">æˆ‘å¯¹Retrofitçš„ç†è§£</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">è‡ªå®šä¹‰View</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../%E8%87%AA%E5%AE%9A%E4%B9%89View/%E8%87%AA%E5%AE%9A%E4%B9%89View%E7%9A%84%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E8%A7%A3%E6%9E%90/">è‡ªå®šä¹‰Viewçš„æ„é€ æ–¹æ³•è§£æ</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">é€†å‘</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../%E9%80%86%E5%90%91/%E4%BD%BF%E7%94%A8FRIDA-DEXDump%E8%84%B1%E5%A3%B3/">ä½¿ç”¨FRIDA-DEXDumpè„±å£³</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../%E9%80%86%E5%90%91/%E4%BD%BF%E7%94%A8MuMu%E6%A8%A1%E6%8B%9F%E5%99%A8%E8%84%B1360%E5%8A%A0%E5%9B%BA%E7%9A%84%E5%A3%B3/">ä½¿ç”¨MuMuæ¨¡æ‹Ÿå™¨è„±360åŠ å›ºçš„å£³</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">éšç¬”</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../ADB%20%E5%BD%95%E5%88%B6%E5%B1%8F%E5%B9%95%E5%91%BD%E4%BB%A4/">ADB å½•åˆ¶å±å¹•å‘½ä»¤</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../AS%E6%98%BE%E7%A4%BANavigation%E6%A0%87%E7%AD%BE/">ASæ˜¾ç¤ºNavigationæ ‡ç­¾</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../AS%E6%9C%AC%E5%9C%B0Maven%E4%BB%93%E5%BA%93%E6%90%AD%E5%BB%BA/">ASæœ¬åœ°Mavenä»“åº“æ­å»º</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Android%20Material%20buttons/">[è¯‘]Android Material buttons</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Android%20Selector%E7%9A%84%E7%AE%80%E5%86%99/">Android Selectorçš„ç®€å†™</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ConstraintLayout-1.1.0%E6%96%B0%E7%89%B9%E6%80%A7/">ConstraintLayout-1.1.0æ–°ç‰¹æ€§</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../EventBus%E6%90%AD%E9%85%8DLifeCycle%E5%8F%AF%E8%83%BD%E6%9B%B4%E7%BE%8E%E5%91%B3/">EventBusæ­é…LifeCycleå¯èƒ½æ›´ç¾å‘³</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Kotlin%E5%85%A5%E9%97%A8%E8%AE%B2%E8%A7%A3/">Kotlinå…¥é—¨è®²è§£</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Kotlin%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0/">Kotlinå†…å»ºå‡½æ•°</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ManifestPlaceholders%E7%9A%84%E5%A6%99%E7%94%A8/">ManifestPlaceholdersçš„å¦™ç”¨</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MaxLineLayoutManager/">MaxLineLayoutManager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../PopupMenu%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/">PopupMenuç®€å•ä½¿ç”¨</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../RxJava%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%A6/">RxJavaå¸¸ç”¨æ“ä½œç¬¦</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ViewDragHelper%E7%AE%80%E8%A7%A3/">ViewDragHelperç®€è§£</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ViewPagerTransforms%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/">ViewPagerTransformsçš„æ·±å…¥ç†è§£</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%5B%E8%AF%91%5D%E4%BB%8EJava%E5%88%87%E6%8D%A2%E5%88%B0Kotlin%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7/">[è¯‘]ä»Javaåˆ‡æ¢åˆ°Kotlinçš„æ–°ç‰¹æ€§</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E4%BC%98%E5%8C%96%E5%B5%8C%E5%A5%97%E7%9A%84RecyclerView/">[è¯‘]ä¼˜åŒ–åµŒå¥—çš„RecyclerView</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E4%BD%BF%E7%94%A8Gradle%E5%92%8CKotlin%E7%BB%84%E7%BB%87Android%E7%9A%84%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/">ä½¿ç”¨Gradleå’ŒKotlinç»„ç»‡èµ„æºæ–‡ä»¶</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E4%BD%BF%E7%94%A8Parcelize%E6%B3%A8%E8%A7%A3%E7%AE%80%E5%8C%96Parcelable/">ä½¿ç”¨Parcelizeæ³¨è§£ç®€åŒ–Parcelable</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E4%BD%BF%E7%94%A8Support%E6%B3%A8%E8%A7%A3%E5%8C%85%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81%E9%80%BB%E8%BE%91/">ä½¿ç”¨Supportæ³¨è§£åŒ…ä¼˜åŒ–ä»£ç é€»è¾‘</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E5%9C%A8Activity%E7%9A%84onCreate%E6%96%B9%E6%B3%95%E4%B8%AD%E8%B0%83%E7%94%A8finish%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/">Activityçš„onCreateä¸­è°ƒç”¨finishçš„ç”Ÿå‘½å‘¨æœŸ</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">å­¦ä¼šè‡ªå®šä¹‰LayoutManager</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#layoutmanager_1">ä¸€äº›è‡ªå®šä¹‰LayoutManagerä¼˜ç§€æ–‡ç« æ¨è</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#layoutmanager_2">å…ˆè®²è®²è‡ªå®šä¹‰LayoutManagerçš„å¸¸è§„å¥—è·¯</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#layoutmanager_3">å†è¯´è¯´è‡ªå®šä¹‰LayoutManagerå®¹æ˜“è¿›å…¥çš„è¯¯åŒº</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#recyclerviewlayoutmanager">ä½¿ç”¨RecyclerViewæˆ–è€…è¯´ç»§æ‰¿äº†LayoutManagerå°±è‡ªå¸¦äº†å¤ç”¨æœºåˆ¶å’Œè§†å›¾å›æ”¶ï¼Ÿ</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#onmeasureisautomeasureenabled">æœªæ­£ç¡®çš„é‡å†™onMeasure()æˆ–isAutoMeasureEnabled()æ–¹æ³•</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#onlayoutchildrenitemview">onLayoutChildren()æ—¶ç›´æ¥åŠ è½½äº†å…¨éƒ¨itemView</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#scrolltopositionsmoothscrolltoposition">æœªæ”¯æŒscrollToPosition()æˆ–smoothScrollToPosition()æ–¹æ³•</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#onlayoutchildren">æœªè§£å†³è½¯é”®ç›˜å¼¹å‡ºæˆ–æ”¶èµ·onLayoutChildren()æ–¹æ³•é‡æ–°è°ƒç”¨çš„é—®é¢˜</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#api">ä¸€äº›æœ‰ç”¨çš„Api</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#view">è·å–ä¸€ä¸ªView</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#viewrecyclerview">å°†Viewæ·»åŠ åˆ°RecyclerViewä¸­</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#view_1">æµ‹é‡View</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#view_2">æ‘†æ”¾View</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#view_3">è·å–Viewçš„ç›¸å…³ä¿¡æ¯</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#view_4">ç§»åŠ¨View</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#view_5">å›æ”¶View</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#orientationhelper">OrientationHelperå¸®åŠ©ç±»</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#layoutmanager_4">æ­£å¼å¼€å§‹è‡ªå®šä¹‰LayoutManager</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#layoutmanagergeneratedefaultlayoutparams">ç»§æ‰¿LayoutManagerå¹¶å®ç°generateDefaultLayoutParams()æ–¹æ³•</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#onmeasureisautomeasureenabled_1">é‡å†™onMeasure()æˆ–isAutoMeasureEnabled()æ–¹æ³•ã€‚</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#onlayoutchildrenview">é‡å†™onLayoutChildren()å¼€å§‹å¡«å……å­Viewã€‚</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#canscrollhorizontallycanscrollvertically">é‡å†™canScrollHorizontally()å’ŒcanScrollVertically()æ–¹æ³•æ”¯æŒæ»‘åŠ¨ã€‚</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#scrollhorizontallybyscrollverticallybyviewview">é‡å†™scrollHorizontallyBy()å’ŒscrollVerticallyBy()æ–¹æ³•åœ¨æ»‘åŠ¨çš„æ—¶å€™å¡«å……viewå’Œå›æ”¶viewã€‚</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#scrolltopositionsmoothscrolltoposition_1">scrollToPosition()å’ŒsmoothScrollToPosition()æ–¹æ³•æ”¯æŒã€‚</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#onlayoutchildren_1">è§£å†³è½¯é”®ç›˜å¼¹å‡ºæˆ–æ”¶èµ·onLayoutChildren()æ–¹æ³•é‡æ–°è°ƒç”¨çš„é—®é¢˜ã€‚</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_1">æœ€å</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E6%97%A0%E9%9A%9C%E7%A2%8D%E6%9C%8D%E5%8A%A1%E7%A0%94%E7%A9%B6/">æ— éšœç¢æœåŠ¡ç ”ç©¶</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E7%94%A8Kotlin%E7%BB%99RecyclerView%E5%86%99%E4%B8%80%E4%B8%AA%E8%B6%85%E7%BA%A7Adapter/">Kotlinå°è£…RecyclerViewçš„Adapter</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E8%87%AA%E5%AE%9A%E4%B9%89SnackBar/">è‡ªå®šä¹‰SnackBar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7%E5%99%A8/">è‡ªå®šä¹‰å…¨å±€å¼‚å¸¸æ•è·å™¨</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">å…¶ä»–</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../%E5%85%B6%E4%BB%96/HenCoder-5%E6%9C%9F-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">HenCoder-5æœŸ-å­¦ä¹ ç¬”è®°</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../%E5%85%B6%E4%BB%96/MacOS%2010.10%20%E4%BB%A5%E4%B8%8A%E8%A7%A3%E5%86%B3%E6%9C%BA%E6%A2%B0%E9%94%AE%E7%9B%98%E6%8C%89%E9%94%AE%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%AB/">MacOS-10.10ä»¥ä¸Š--è§£å†³æœºæ¢°é”®ç›˜æŒ‰é”®æ— æ³•è¯†åˆ«</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../%E5%85%B6%E4%BB%96/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9F%B3%E8%A7%86%E9%A2%91%E5%85%A5%E9%97%A8-FFmpeg%28%E5%85%AC%E5%8F%B8%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%29/">ç§»åŠ¨ç«¯éŸ³è§†é¢‘å…¥é—¨ FFmpeg(å…¬å¸æŠ€æœ¯åˆ†äº«)</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">blog</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Android &raquo;</li>
          <li>éšç¬” &raquo;</li><li>å­¦ä¼šè‡ªå®šä¹‰LayoutManager</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/simplepeng/blog/edit/master/docs/android/éšç¬”/å­¦ä¼šè‡ªå®šä¹‰LayoutManager.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="layoutmanager">å­¦ä¼šè‡ªå®šä¹‰LayoutManager</h1>
<p>æœ€å¼€å§‹æˆ‘åœ¨å­¦ä¹ è‡ªå®šä¹‰LayoutManagerçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ç½‘ä¸Šæœæ–‡ç« ï¼Œçœ‹åšå®¢ï¼Œä»¥åŠä¸€äº›å…¬ä¼—å·çš„æ¨æ–‡ã€‚åˆšå¼€å§‹çœ‹çš„æ—¶å€™è§‰å¾—è¿˜æ˜¯é‚£ä¹ˆå›äº‹ï¼Œä½†æ˜¯åœ¨æ…¢æ…¢çš„æ·±å…¥LayoutManageræºç æ‰å‘ç°å¾ˆå¤šçš„æ–‡ç« å…¶å®éƒ½æ˜¯ä¸åˆæ ¼ï¼Œä¹ƒè‡³å¯ä»¥è¯´æ˜¯å¾ˆè¯¯å¯¼äººçš„ï¼Œæ‰€ä»¥æˆ‘æ‰æƒ³è‡ªå·±å†™ä¸€ç¯‡å…³äºè‡ªå®šä¹‰LayoutManagerçš„æ–‡ç« ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°ä¸€éƒ¨åˆ†äººèƒ½å…¥é—¨è‡ªå®šä¹‰LayoutManagerå§ã€‚</p>
<h2 id="layoutmanager_1">ä¸€äº›è‡ªå®šä¹‰LayoutManagerä¼˜ç§€æ–‡ç« æ¨è</h2>
<p>å‰é¢è™½ç„¶è¯´æœ‰å¾ˆå¤šåšå®¢æ˜¯ä¸åˆæ ¼çš„ï¼Œä½†æ˜¯åŒæ ·è¿˜æ˜¯æœ‰ä¸€äº›ä¼˜ç§€çš„ä½œè€…çš„åšå®¢å¯¹åœ¨ä¸‹å¯å‘å¾ˆå¤§ï¼Œç‰¹åˆ«æ˜¯<strong>Dave</strong>å¤§ç¥<code>building-a-recyclerview-layoutmanager-part</code>çš„ç³»åˆ—çš„æ–‡ç« ï¼ŒçœŸçš„æ˜¯è®²å¾—ä¸èƒ½å†æ£’äº†ï¼è™½ç„¶å·²ç»æ˜¯14å¹´çš„æ–‡ç« ï¼Œä½†æ˜¯æ”¾åœ¨å½“ä¸‹æ¥çœ‹ï¼Œä¾ç„¶æ˜¯è‡ªå®šä¹‰LayoutManagerç›¸å…³æ–‡ç« çš„é¡¶å³°ï¼Œè™½ç„¶æ–‡ç« æ˜¯è‹±æ–‡ï¼Œä½†æ˜¯è¿˜æ˜¯å¼ºçƒˆæ¨èé˜…è¯»ï¼</p>
<p><a href="http://wiresareobsolete.com/2014/09/building-a-recyclerview-layoutmanager-part-1/">Building a RecyclerView LayoutManager â€“ Part 1</a></p>
<p><a href="http://wiresareobsolete.com/2014/09/recyclerview-layoutmanager-2/">Building a RecyclerView LayoutManager â€“ Part 2</a></p>
<p><a href="http://wiresareobsolete.com/2015/02/recyclerview-layoutmanager-3/">Building a RecyclerView LayoutManager â€“ Part 3</a></p>
<p>æ— æ„ä¸­å‘ç°äº†æœ‰Bç«™å¤§ä½¬ç¿»è¯‘äº†<strong>Dave</strong>å¤§ç¥è®²è§£è‡ªå®šä¹‰LayoutManagerçš„åŸ¹è®­è§†é¢‘ï¼Œè¿™ç®€ç›´æ˜¯å®è—ï¼Œå»ºè®®æ”¶è—å¤šæ¬¡è§‚çœ‹ã€‚</p>
<p><a href="https://www.bilibili.com/video/BV1fW411A76o">Mastering RecyclerView Layouts</a></p>
<p>å…¶æ¬¡å°±æ˜¯<strong>å¼ æ—­ç«¥</strong>åœ¨CSDNå‘å¸ƒ<code>æŒæ¡è‡ªå®šä¹‰LayoutManager</code>ç›¸å…³åšå®¢ï¼Œç‰¹åˆ«æ˜¯æ–‡ç« ä¸­çš„å¸¸è§è¯¯åŒºå’Œæ³¨æ„äº‹é¡¹ï¼Œå»ºè®®å¤šæ¬¡é˜…è¯»ã€‚</p>
<p><a href="https://blog.csdn.net/zxt0601/article/details/52948009">https://blog.csdn.net/zxt0601/article/details/52948009</a></p>
<p>ç‰¹åˆ«æ˜¯è¿™å¥è¯é“å‡ºäº†è‡ªå®šä¹‰LayoutManagerçš„çœŸè°›ï¼š<code>ä¸€ä¸ªåˆæ ¼çš„LayoutManagerï¼ŒchildCountæ•°é‡ä¸åº”å¤§äºå±å¹•ä¸Šæ˜¾ç¤ºçš„Itemæ•°é‡ï¼Œè€ŒscrapCacheç¼“å­˜åŒºåŸŸçš„Itemæ•°é‡åº”è¯¥æ˜¯0</code>ï¼Œè¿™é‡Œå»ºè®®å¤šè¯»å‡ éï¼ŒåŠ æ·±ç†è§£ã€‚</p>
<p>æœ€åå°±æ˜¯<strong>é™ˆå°åª›</strong>çš„<code>Androidè‡ªå®šä¹‰LayoutManagerç¬¬åä¸€å¼ä¹‹é£é¾™åœ¨å¤©</code>ï¼Œè¿™ä¹ˆå¤§ä½¬çš„æ€è·¯æ€»æ˜¯é‚£ä¹ˆå¥‡ç‰¹ï¼Œé€»è¾‘æ€»æ˜¯é‚£ä¹ˆæ¸…æ™°ã€‚</p>
<p>https://blog.csdn.net/u011387817/article/details/81875021</p>
<h2 id="layoutmanager_2">å…ˆè®²è®²è‡ªå®šä¹‰LayoutManagerçš„å¸¸è§„å¥—è·¯</h2>
<ol>
<li>ç»§æ‰¿<code>RecyclerView.LayoutManager</code>å¹¶å®ç°<code>generateDefaultLayoutParams()</code>æ–¹æ³•ã€‚</li>
<li>æŒ‰éœ€ï¼Œé‡å†™<code>onMeasure()</code>æˆ–<code>isAutoMeasureEnabled()</code>æ–¹æ³•ã€‚</li>
<li>é‡å†™<code>onLayoutChildren()</code>å¼€å§‹ç¬¬ä¸€æ¬¡å¡«å……itemViewã€‚</li>
<li>é‡å†™<code>canScrollHorizontally()</code>å’Œ<code>canScrollVertically()</code>æ–¹æ³•æ”¯æŒæ»‘åŠ¨ã€‚</li>
<li>é‡å†™<code>scrollHorizontallyBy()</code>å’Œ<code>scrollVerticallyBy()</code>æ–¹æ³•åœ¨æ»‘åŠ¨çš„æ—¶å€™å¡«å……å’Œå›æ”¶itemViewã€‚</li>
<li>é‡å†™<code>scrollToPosition()</code>å’Œ<code>smoothScrollToPosition()</code>æ–¹æ³•æ”¯æŒã€‚</li>
<li>è§£å†³è½¯é”®ç›˜å¼¹å‡ºæˆ–æ”¶èµ·å¯¼è‡´<code>onLayoutChildren()</code>æ–¹æ³•è¢«é‡æ–°è°ƒç”¨çš„é—®é¢˜ã€‚</li>
</ol>
<h2 id="layoutmanager_3">å†è¯´è¯´è‡ªå®šä¹‰LayoutManagerå®¹æ˜“è¿›å…¥çš„è¯¯åŒº</h2>
<ol>
<li>ä½¿ç”¨<code>RecyclerView</code>æˆ–è€…è¯´<code>ç»§æ‰¿äº†LayoutManager</code>å°±è‡ªå¸¦äº†å¤ç”¨æœºåˆ¶å’Œè§†å›¾å›æ”¶</li>
<li>æœªæ­£ç¡®çš„é‡å†™<code>onMeasure()</code>æˆ–<code>isAutoMeasureEnabled()</code>æ–¹æ³•</li>
<li><code>onLayoutChildren()</code>æ—¶ç›´æ¥åŠ è½½äº†å…¨éƒ¨itemView</li>
<li>æœªæ”¯æŒ<code>scrollToPosition()</code>æˆ–<code>smoothScrollToPosition()</code>æ–¹æ³•</li>
<li>æœªè§£å†³è½¯é”®ç›˜å¼¹å‡ºæˆ–æ”¶èµ·<code>onLayoutChildren()</code>æ–¹æ³•é‡æ–°è°ƒç”¨çš„é—®é¢˜ã€‚</li>
</ol>
<h4 id="recyclerviewlayoutmanager">ä½¿ç”¨RecyclerViewæˆ–è€…è¯´ç»§æ‰¿äº†LayoutManagerå°±è‡ªå¸¦äº†å¤ç”¨æœºåˆ¶å’Œè§†å›¾å›æ”¶ï¼Ÿ</h4>
<p>æˆ‘å‘ç°å¾ˆå¤šäººæŠŠRecyclerViewæƒ³å¾—å¤ªå®Œç¾äº†ï¼Œè®¤ä¸ºRecyclerViewå¤©ç”Ÿå°±è‡ªå¸¦äº†å¤ç”¨æœºåˆ¶å’Œè§†å›¾å›æ”¶ï¼Œåªè¦ä½¿ç”¨RecyclerViewæ ¹æœ¬ä¸ç”¨å…³å¿ƒåŠ è½½itemçš„æ•°é‡ã€‚å…¶å®ä¸ç”¨å¾ˆä»”ç»†çš„é˜…è¯»RecyclerViewçš„æºç ä¹Ÿèƒ½å‘ç°ï¼ŒRecyclerViewåªä¸è¿‡æ˜¯ä¸€ä¸ªæä¾›äº†<code>å¤šçº§ç¼“å­˜</code>çš„<code>è¶…çº§ViewGroup</code>è€Œå·²ã€‚å¹¶ä¸”RecyclerViewåªæ˜¯å°†è‡ªå·±çš„<code>onLayout</code>æ–¹æ³•å®Œå…¨å§”æ‰˜ç»™äº†LayoutManagerï¼Œæ‰€ä»¥ç»§æ‰¿LayoutManagerä¹Ÿä¸ä¼šè‡ªå¸¦å¤ç”¨æœºåˆ¶å’Œè§†å›¾å›æ”¶ã€‚</p>
<p>ç”¨<code>LinearLayoutManager</code>ä¸¾ä¾‹ï¼Œåœ¨LinearLayoutManageræºç ä¸­æœ‰ä¸€ä¸ª<code>recycleByLayoutState()</code>æ–¹æ³•ï¼Œå®ƒåœ¨æ»šåŠ¨å¡«å……itemViewæ—¶è°ƒç”¨ï¼Œç”¨æ¥å›æ”¶è¶…å‡ºå±å¹•çš„itemViewï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è‡ªå®šä¹‰LayoutManagerçš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ï¼Œä»€ä¹ˆæ—¶å€™è¯¥å›æ”¶itemViewæ˜¯ç”±æˆ‘ä»¬å¼€å‘è€…è‡ªå·±å†³å®šï¼</p>
<pre><code class="language-java">    @Override
    public int scrollHorizontallyBy(int dx, RecyclerView.Recycler recycler,
            RecyclerView.State state) {
                ...
        return scrollBy(dx, recycler, state);
    }    

    int scrollBy(int delta, RecyclerView.Recycler recycler, RecyclerView.State state) {
      ...
        fill(recycler, mLayoutState, state, false);
      ...
    }

        int fill(RecyclerView.Recycler recycler, LayoutState layoutState,
            RecyclerView.State state, boolean stopOnFocusable) {
      recycleByLayoutState(recycler, layoutState);
      ...
      layoutChunk()
      ...
      recycleByLayoutState(recycler, layoutState); 
    }

         void recycleByLayoutState(){
       ...
       if (layoutState.mLayoutDirection == LayoutState.LAYOUT_START) {
            recycleViewsFromEnd(recycler, scrollingOffset, noRecycleSpace);
        } else {
            recycleViewsFromStart(recycler, scrollingOffset, noRecycleSpace);
        }
     }

</code></pre>
<h4 id="onmeasureisautomeasureenabled">æœªæ­£ç¡®çš„é‡å†™onMeasure()æˆ–isAutoMeasureEnabled()æ–¹æ³•</h4>
<p>ä¸Šé¢<code>å¸¸è§„å¥—è·¯</code>ä¸­æˆ‘å†™çš„æ˜¯<code>æŒ‰éœ€</code>é‡å†™onMeasure()å’ŒisAutoMeasureEnabled()æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæ˜¯<code>æŒ‰éœ€</code>å‘¢ï¼Ÿå› ä¸º<code>LayoutManger</code>çš„<code>onMeasure()</code>æœ‰é»˜è®¤å®ç°ï¼Œå¹¶ä¸”<code>isAutoMeasureEnabled()</code>é»˜è®¤è¿”å›çš„<code>false</code>ã€‚è¿™ä¹Ÿæ˜¯ä¸ºå•¥æœ‰äº›åšå®¢æˆ–è€…Githubçš„æºç è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ²¡æœ‰é‡å†™å´ä¾ç„¶æ²¡æœ‰é—®é¢˜çš„åŸå› æ‰€åœ¨ï¼Œå› ä¸ºä»–ä»¬ç›´æ¥æŠŠ<code>RecyclerView</code>çš„<code>width</code>å’Œ<code>height</code>éƒ½è®¾ç½®æˆäº†<code>match_parent</code>ã€‚å½“ç„¶å¦‚æœä½ èƒ½ç¡®å®šä½ çš„LayoutManageråªæ”¯æŒå®½é«˜åŒæ—¶è¦<code>match_parent</code>æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è¿™ä¹ˆæã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œä»€ä¹ˆæ—¶å€™é‡å†™<code>onMeasure()</code>ï¼Œä»€ä¹ˆæ—¶å€™é‡å†™<code>isAutoMeasureEnabled()</code>ï¼Œæˆ–è€…æœ‰æ²¡æœ‰æƒ…å†µåŒæ—¶é‡å†™ä¸¤ä¸ªæ–¹æ³•å‘¢ï¼Ÿè¿™é‡Œåœ¨æˆ‘é˜…è¯»äº†å¤§é‡æºç å’Œæºç æ³¨é‡Šå¾—å‡ºçš„ç»“è®ºå°±æ˜¯ï¼šä¸è¦åŒæ—¶é‡å†™ä¸¤ä¸ªæ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬æ˜¯äº’æ–¥çš„ï¼Œçœ‹æºç ä½ å°±æ‡‚äº†ã€‚é‡å†™<code>onMeasure()</code>çš„æƒ…å†µä¹Ÿæå°‘ï¼Œé™¤éåƒæˆ‘é‚£ä¸ª<code>PickerLayoutManger</code>ä¸€æ ·ï¼Œè¦è®¾ç½®ä¸€ä¸ªç»å¯¹çš„é«˜åº¦ç»™LayoutManagerã€‚<code>isAutoMeasureEnabled()</code>æ˜¯è‡ªæµ‹é‡æ¨¡å¼ï¼Œç»™<code>RecyclerView</code>çš„<code>wrap_content</code>çš„ç”¨çš„ï¼Œå¦‚æœä½ çš„LayoutManagerè¦æ”¯æŒ<code>wrap_content</code>é‚£å°±å¿…é¡»é‡å†™ã€‚</p>
<h4 id="onlayoutchildrenitemview">onLayoutChildren()æ—¶ç›´æ¥åŠ è½½äº†å…¨éƒ¨itemView</h4>
<p>ç½‘ä¸Šåšå®¢ä»¥åŠGithubä¸Šæœ‰ä¸€äº›Demoï¼Œæ™®éå­˜åœ¨ä¸‹é¢è¿™ç§å†™æ³•ï¼š</p>
<pre><code class="language-java"> for (int i = 0; i &lt; getItemCount(); i++) {
            View view = recycler.getViewForPosition(i);
            addView(view);
            ......
 }
</code></pre>
<p>æœ‰ä¸€è¯´ä¸€ï¼Œèƒ½å†™å‡ºè¿™ç§å†™æ³•çš„äººçœŸçš„ä¸æ˜¯åœ¨æç¬‘å—ï¼Ÿåœ¨<code>onLayoutChildren</code>çš„æ—¶å€™ç›´æ¥<code>éå†itemCount</code>ç„¶å<code>addView</code>ï¼Œè¿™çœŸçš„ä¸æ˜¯åœ¨ä½œæ­»å—ï¼Ÿå°±ç®—æœ‰ç¼“å­˜ç¬¬ä¸€æ¬¡éå†è¿˜æ˜¯ä¼šå…¨éƒ¨èµ°ä¸€é<code>onCreateViewHolder</code>å•Šï¼Œè‡ªå·±å°±ä¸èƒ½æŠŠitemCountè®¾ä¸ªå¤§ç‚¹çš„æ•°è¯•è¯•ä¼šä¸ä¼šå¡æ­»UIæ¸²æŸ“å—ï¼å½“æˆ‘æœ‰è¿™ç§æƒ³æ³•ï¼Œè€Œä¸”è¿˜æƒ³å»è¯„è®ºåŒºè®¨æ•™è®¨æ•™çš„æ—¶å€™ï¼Œæˆ‘åˆå‘ç°äº†ä¸Šé¢é‚£ç§å†™æ³•çš„å˜ç§ï¼Œç½¢äº†ç½¢äº†ï¼Œè¿™å–·å­ä¸å½“ä¹Ÿç½¢ğŸ˜ğŸ˜ğŸ˜ã€‚</p>
<pre><code class="language-java"> for (int i = 0; i &lt; getItemCount(); i++) {
            View view = recycler.getViewForPosition(i);
            addView(view);
            ......
              è®°å½•ä¸€äº›itemçš„å®½é«˜ï¼Œä½ç½®ç­‰ä¿¡æ¯
            .....
            recyler.recycleView(view)
 }
</code></pre>
<p>æœ€ç®€å•çš„æµ‹è¯•æ–¹æ³•å°±æ˜¯æŠŠ<code>itemCount</code>è®¾ç½®ä¸º<code>Int.MAX_VALUE</code>ï¼Œæ²¡æœ‰å¼‚å¸¸å‘ç”Ÿå°±ç®—OKã€‚</p>
<h4 id="scrolltopositionsmoothscrolltoposition">æœªæ”¯æŒscrollToPosition()æˆ–smoothScrollToPosition()æ–¹æ³•</h4>
<p>è¿™ä¸ªé—®é¢˜ä¸¥è°¨çš„æ¥è®²ä¹Ÿä¸ç®—ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä½†æ˜¯ç§ä»¥ä¸ºä¸€ä¸ªåˆæ ¼çš„LayoutManagerçš„è¿˜æ˜¯åº”è¯¥å»é€‚é…è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œæ¯•ç«Ÿ<code>RecyclerView</code>çš„<code>scrollToPosition()</code>å’Œ<code>smoothScrollToPosition()</code>åªæ˜¯å¯¹LayoutManagerè¿™ä¸¤ä¸ªæ–¹æ³•çš„å°è£…ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›å‘å¸ƒåˆ°Githubä¸Šçš„å¼€æºåº“æ›´åº”è¯¥å»é€‚é…è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<h4 id="onlayoutchildren">æœªè§£å†³è½¯é”®ç›˜å¼¹å‡ºæˆ–æ”¶èµ·onLayoutChildren()æ–¹æ³•é‡æ–°è°ƒç”¨çš„é—®é¢˜</h4>
<p>è¿™ä¸ªé—®é¢˜æˆ‘å‘ç°å¤§å¤šæ•°çš„äººéƒ½æ²¡æ³¨æ„åˆ°ï¼Œè€Œä¸”æœ‰ä¸€äº›å¼€æºåº“ä¹Ÿæ˜¯å­˜åœ¨è¿™ä¸ªé—®é¢˜çš„ã€‚é—®é¢˜å‡ºç°çš„æ ¹æºå°±æ˜¯åœ¨å½“<code>EditText</code>è·å–åˆ°ç„¦ç‚¹å¯¼è‡´<code>è½¯é”®ç›˜å¼¹èµ·æˆ–è€…æ”¶èµ·</code>çš„æ—¶å€™ï¼ŒLayoutManagerä¼šé‡æ–°å›è°ƒ<code>onLayoutChildren()</code>æ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªLayoutManagerçš„<code>onLayoutChildren</code>æ–¹æ³•å†™å¾—ä¸å¤Ÿåˆç†ï¼Œå°±ä¼šç»™ä½¿ç”¨çš„äººå¸¦æ¥å›°æ‰°ï¼Œè¯¦ç»†çš„å†…å®¹ä¼šæ”¾åœ¨ä¸‹é¢å¼€å§‹è‡ªå®šä¹‰LayoutManagerå†è®²ã€‚</p>
<p>è¯è¯´åˆ°è¿™é‡Œï¼Œæˆ‘åœ¨çœ‹<code>LinearLayoutManager</code>æºç åˆä¸€æ¬¡å¯¹Googleå·¥ç¨‹å¸ˆæ·±æ·±çš„æŠ˜æœï¼Œåœ¨LinearLayoutManagerçš„<code>onLayoutChildren</code>æ–¹æ³•ä¸­æœ‰ä¸€æ®µä»£ç å°±æ˜¯å¯¹è¿™ç§é—®é¢˜çš„å¤„ç†ï¼Œå¹¶ä¸”è¿˜æ˜¯å‡çº§ç‰ˆã€‚</p>
<pre><code class="language-java"> final View focused = getFocusedChild()
 ...
 else if (focused != null &amp;&amp; (mOrientationHelper.getDecoratedStart(focused)
                        &gt;= mOrientationHelper.getEndAfterPadding()
                || mOrientationHelper.getDecoratedEnd(focused)
                &lt;= mOrientationHelper.getStartAfterPadding())) {
      mAnchorInfo.assignFromViewAndKeepVisibleRect(focused, getPosition(focused));
}
</code></pre>
<p><code>assignFromViewAndKeepVisibleRect</code>æ–¹æ³•æ˜¯å…³é”®ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹çœ‹æºç ã€‚å¤§æ¦‚é€»è¾‘å°±æ˜¯ï¼šè·å–åˆ°RecyclerViewä¸­è·å–åˆ°ç„¦ç‚¹çš„é‚£ä¸ªitemViewå’Œå®ƒçš„positionï¼Œå¹¶å¼€å§‹è®¡ç®—å…¶ä½ç½®ï¼Œè®©å®ƒä¿æŒåœ¨è½¯é”®ç›˜ä¸Šé¢çš„å¯è§èŒƒå›´å†…ã€‚</p>
<h2 id="api">ä¸€äº›æœ‰ç”¨çš„Api</h2>
<p>åœ¨å¼€å§‹è‡ªå®šä¹‰LayoutManagerå‰ï¼Œå…ˆè§£é‡Šä¸€äº›Apiçš„ç”¨æ³•ï¼Œè¿™æ ·å¯ä»¥æ›´å¿«çš„è¿›å…¥ä¸»é¢˜ã€‚</p>
<h4 id="view">è·å–ä¸€ä¸ªView</h4>
<pre><code class="language-kotlin"> val view = recycler.getViewForPosition(position)
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•ä¼šä»<code>Recycler</code>ä¸­è·å–åˆ°ä¸€ä¸ªä¸ä¼šä¸º<code>null</code>çš„Viewï¼Œå¦‚æœpositionè¶…è¿‡itemCountæˆ–å°äº0ï¼Œå°±ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚å†…éƒ¨ä»£ç é€»è¾‘å°±æ˜¯ä»ä¸åŒçš„ç¼“å­˜ä¸­æ‹¿Viewï¼Œæœ‰å°±ç›´æ¥è¿”å›è¿™ä¸ªViewï¼Œæ²¡æœ‰å°±ç”¨<code>onCreateViewHolder</code>åˆ›å»ºå¹¶è¿”å›ã€‚</p>
<p><code>Recycler</code>ç±»å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªå›æ”¶ç®¡ç†ç«™ï¼Œéœ€è¦Viewæ—¶å°±å‘å®ƒè¦ï¼Œä¸éœ€è¦æ—¶å°±ä¸¢ç»™å®ƒã€‚</p>
<h4 id="viewrecyclerview">å°†Viewæ·»åŠ åˆ°RecyclerViewä¸­</h4>
<pre><code class="language-java">addDisappearingView(View child)
addDisappearingView(View child, int index)

addView(View child)
addView(View child, int index)
</code></pre>
<p><code>addDisappearingView</code>æ–¹æ³•ä¸»è¦ç”¨äºæ”¯æŒé¢„æµ‹åŠ¨ç”»ï¼Œä¾‹å¦‚ï¼š<code>notifyItemRemoved</code>æ—¶çš„åˆ é™¤åŠ¨ç”»</p>
<p><code>addView</code>æ–¹æ³•æ›´å¸¸ç”¨ï¼Œåªè¦æ˜¯æ·»åŠ Viewéƒ½éœ€è¦ç”¨åˆ°å®ƒã€‚</p>
<h4 id="view_1">æµ‹é‡View</h4>
<pre><code class="language-java">measureChild(@NonNull View child, int widthUsed, int heightUsed)
measureChildWithMargins(@NonNull View child, int widthUsed, int heightUsed)
</code></pre>
<p>ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ç”¨æ¥æµ‹é‡Viewçš„ç›¸å…³ä¿¡æ¯ï¼Œä»åå­—æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºï¼Œä¸€ä¸ªæ–¹æ³•æ˜¯ä¼šå¸¦ä¸Š<code>margin</code>è®¡ç®—ï¼Œå¦å¤–ä¸€ä¸ªåˆ™ä¸ä¼šã€‚</p>
<p><code>widthUsed</code>å’Œ<code>heightUsed</code>ä¹Ÿèƒ½ä»åç§°çœ‹å‡ºç«¯å€ªï¼Œä¸€èˆ¬ä¼ 0å°±å¯ä»¥äº†ï¼Œè·Ÿç€<code>LinearLayoutManager</code>å†™å°±å¯¹äº†ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong>æµ‹é‡Viewä¹Ÿä¸ä¸€å®šè¦ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œåœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å†™æµ‹é‡çš„æ–¹æ³•ï¼Œæ¯”å¦‚åœ¨<code>StaggeredGridLayoutManager</code>ä¸­å°±æ˜¯è‡ªå·±é‡å†™çš„æµ‹é‡æ–¹æ³•<code>measureChildWithDecorationsAndMargin()</code>ï¼Œä»¥åŠæˆ‘çš„ä¸€ä¸ªå¼€æºåº“<a href="https://github.com/simplepeng/PickerLayoutManager">PickerLayoutManager</a>ä¸­åœ¨<code>onMeasure</code>ä¸­ç›´æ¥ä½¿ç”¨äº†<code>view.measure()</code>è¿™ç§åŸç”Ÿæ–¹æ³•ã€‚</p>
<h4 id="view_2">æ‘†æ”¾View</h4>
<pre><code class="language-java">layoutDecorated(@NonNull View child, int left, int top, int right, int bottom)
layoutDecoratedWithMargins(@NonNull View child, int left, int top, int right,
                int bottom) {
</code></pre>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•æ²¡å•¥å¥½è¯´çš„ï¼Œå°±æ˜¯å¯¹<code>view.layout()</code>çš„å°è£…ï¼Œåªè¦å†™è¿‡è‡ªå®šä¹‰ViewGroupçš„äººåº”è¯¥ä¹Ÿä¸ä¼šé™Œç”Ÿã€‚</p>
<h4 id="view_3">è·å–Viewçš„ç›¸å…³ä¿¡æ¯</h4>
<pre><code class="language-java">int getPosition(@NonNull View view) 
</code></pre>
<p>è·å–Viewçš„layout positionï¼Œè¿™ä¸ªæ–¹æ³•ååˆ†æœ‰ç”¨ï¼Œä¹Ÿæ²¡å•¥äººè®²åˆ°è¿‡ã€‚</p>
<pre><code class="language-java">int getDecoratedMeasuredWidth(@NonNull View child)
int getDecoratedMeasuredHeight(@NonNull View child)
</code></pre>
<p>è·å–Viewçš„å®½é«˜ï¼Œå¹¶ä¸”æ˜¯åŒ…å«äº†ItemDecorationçš„å æ¯”ã€‚</p>
<pre><code class="language-java">int getDecoratedTop(@NonNull View child)
int getDecoratedLeft(@NonNull View child)
int getDecoratedRight(@NonNull View child)
int getDecoratedBottom(@NonNull View child)
</code></pre>
<p>è·å–Viewçš„leftï¼Œtopï¼Œrightï¼Œbottomè·ç¦»RecyclerViewè¾¹ç¼˜çš„è·ç¦»ï¼ŒåŒæ ·åŒ…å«äº†äº†ItemDecorationçš„å æ¯”ã€‚</p>
<h4 id="view_4">ç§»åŠ¨View</h4>
<pre><code class="language-java">offsetChildrenHorizontal(@Px int dx)
offsetChildrenVertical(@Px int dy)
</code></pre>
<p>æ°´å¹³æˆ–å‚ç›´æ–¹å‘çš„ç§»åŠ¨å…¨éƒ¨å­Viewï¼Œçœ‹æºç å¾—çŸ¥å…¶å®å°±æ˜¯éå†è°ƒç”¨äº†å­Viewçš„<code>offsetTopAndBottom</code>æˆ–<code>offsetLeftAndRight</code>æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åœ¨è‡ªå®šä¹‰ViewGroupç§»åŠ¨å­Viewæ—¶ä¹Ÿç»å¸¸ç”¨åˆ°ã€‚</p>
<h4 id="view_5">å›æ”¶View</h4>
<pre><code class="language-java">detachAndScrapAttachedViews(@NonNull Recycler recycler)
detachAndScrapView(@NonNull View child, @NonNull Recycler recycler)
detachAndScrapViewAt(int index, @NonNull Recycler recycler)

removeAndRecycleAllViews(@NonNull Recycler recycler)
removeAndRecycleView(@NonNull View child, @NonNull Recycler recycler)
removeAndRecycleViewAt(int index, @NonNull Recycler recycler)
</code></pre>
<p>ä¸Šé¢å‡ ä¸ªæ–¹æ³•åªè¦è®°ä½æ˜¯<code>detachAndScrap</code>å¼€å¤´çš„å°±æ˜¯è½»é‡çº§çš„å›æ”¶Viewï¼Œé©¬ä¸Šåˆè¦æ·»åŠ Viewå›æ¥ã€‚<code>removeAndRecycle</code>å¼€å¤´çš„å°±æ˜¯åŠ å¼ºç‰ˆçš„å›æ”¶Viewï¼Œå½“å†æ¬¡æ·»åŠ Viewå›æ¥æ—¶ä¼šæ‰§è¡Œ<code>onBindViewHolder</code>æ–¹æ³•ã€‚</p>
<p>æˆ‘çœ‹ç½‘ä¸Šæ²¡å•¥åšå®¢çœŸæ­£è®²æ¸…æ¥šä»€ä¹ˆæ—¶å€™è¯¥ç”¨å“ªä¸ªæ–¹æ³•æ¥å›æ”¶Viewçš„ï¼Œè¿™é‡Œæœ‰ä¸ªç®€å•çš„åŠæ³•åŒºåˆ†ä»€ä¹ˆæ—¶å€™è¯¥ç”¨å“ªä¸€ä¸ªå›æ”¶Viewçš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯ï¼š</p>
<ul>
<li>
<p>åœ¨<code>onLayoutChildren</code>å›æ”¶Viewä½¿ç”¨<code>detachAndScrap</code>çš„ç³»åˆ—æ–¹æ³•ï¼Œå› ä¸ºonLayoutChildrenæ–¹æ³•ä¼šè¿ç»­å¤šæ¬¡è°ƒç”¨ï¼Œ<code>detachAndScrap</code>ç³»åˆ—çš„æ–¹æ³•å°±æ˜¯ç”¨åœ¨è¿™æ—¶å€™ã€‚</p>
</li>
<li>
<p>åœ¨<code>æ»šåŠ¨å‘ç”Ÿå</code>è¦å›æ”¶è¶…å‡ºå±å¹•ä¸å¯è§çš„Viewæ—¶ç”¨<code>removeAndRecycle</code>çš„ç³»åˆ—æ–¹æ³•ã€‚</p>
</li>
</ul>
<p>åˆ«é—®æˆ‘ä¸ºå•¥çŸ¥é“ï¼Œå› ä¸ºæˆ‘çœ‹<code>LinearLayoutManager</code>å’Œ<code>StaggeredGridLayoutManager</code>ä¹Ÿæ˜¯è¿™ä¹ˆç”¨çš„ï¼Œå˜»å˜»ï¼read the fucking source code~</p>
<h4 id="orientationhelper">OrientationHelperå¸®åŠ©ç±»</h4>
<p><img alt="img_orientation_helper.png" src="https://i.loli.net/2020/09/08/AD6sjHya9NnpcFW.png" /></p>
<p>è¿™ä¸ªå¸®åŠ©ç±»å€¼å¾—å¥½å¥½å¤¸èµï¼Œè¿™ä¹Ÿæ˜¯æˆ‘åœ¨é˜…è¯»<code>LinearLayoutManager</code>æºç æ—¶å‘ç°çš„ï¼ŒOrientationHelperæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒæŠ½è±¡äº†å¤§é‡ä¾¿åˆ©çš„æ–¹æ³•ï¼Œå¹¶ä¸”æä¾›äº†ä¸¤ä¸ªé™æ€æ–¹æ³•<code>createHorizontalHelper</code>å’Œ<code>createVerticalHelper</code>ç”¨æ¥åˆ›å»ºç›¸åº”æ–¹å‘çš„å¸®åŠ©ç±»ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚ä½¿ç”¨OrientationHelperå¯ä»¥å¤§å¤§å‡å°‘å¦‚ä¸‹æˆ‘åœ¨<a href="https://github.com/simplepeng/StackLayoutManager">StackLayoutManager</a>çš„æ ·æ¿ä»£ç ã€‚</p>
<pre><code class="language-kotlin">    /**
     * ç§»åŠ¨æ‰€æœ‰å­view
     */
    private fun offsetChildren(amount: Int) {
        if (orientation == HORIZONTAL) {
            offsetChildrenHorizontal(amount)
        } else {
            offsetChildrenVertical(amount)
        }
    }
...
    private fun getTotalSpace(): Int {
        return if (orientation == HORIZONTAL) {
            width - paddingLeft - paddingRight
        } else {
            height - paddingTop - paddingBottom
        }
    }
</code></pre>
<h2 id="layoutmanager_4">æ­£å¼å¼€å§‹è‡ªå®šä¹‰LayoutManager</h2>
<p>ç°åœ¨æˆ‘ä»¬å¼€å§‹æ­£å¼è®²è§£å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªLayoutManagerï¼Œå¤§æ¦‚æ­¥éª¤å°±æ˜¯å¦‚ä¸Šé¢<code>è‡ªå®šä¹‰LayoutManagerçš„å¸¸è§„å¥—è·¯</code>ä¸€æ ·ï¼Œå¹¶ä¸”æˆ‘ä¼šç”¨æˆ‘å†™çš„ä¸¤ä¸ªå¼€æºåº“<a href="https://github.com/simplepeng/PickerLayoutManager">PickerLayoutManager</a>å’Œ<a href="https://github.com/simplepeng/StackLayoutManager">StackLayoutManager</a>æ¥è®²è§£ï¼Œå–œæ¬¢çš„å¯ä»¥<code>star</code>ä¸€ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th>https://github.com/simplepeng/StackLayoutManager</th>
<th>https://github.com/simplepeng/PickerLayoutManager</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="img_stack_layout_manager.png" src="https://i.loli.net/2020/09/08/iHwhxlT5Ddm2ECg.png" /></td>
<td><img alt="img_picker_layout_manager.png" src="https://i.loli.net/2020/09/08/Bk1pQf43EyOjxIe.png" /></td>
</tr>
</tbody>
</table>
<h4 id="layoutmanagergeneratedefaultlayoutparams">ç»§æ‰¿LayoutManagerå¹¶å®ç°generateDefaultLayoutParams()æ–¹æ³•</h4>
<p>è¿™æ²¡å•¥å¥½è¯´çš„ï¼Œ<code>generateDefaultLayoutParams</code>æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œç»§æ‰¿LayoutManagerå°±å¿…é¡»å®ç°ï¼Œä½ è‡ªå®šä¹‰çš„LayoutManagerçš„itemViewæ”¯æŒå•¥LayoutParamså°±å†™å“ªç§ï¼Œæ¯”å¦‚æˆ‘å†™çš„<a href="https://github.com/simplepeng/PickerLayoutManager">PickerLayoutManager</a>å’Œ<a href="https://github.com/simplepeng/StackLayoutManager">StackLayoutManager</a>å°±æ˜¯ä¸åŒçš„å®ç°ã€‚</p>
<pre><code class="language-kotlin">class PickerLayoutManager:: RecyclerView.LayoutManager(){
      override fun generateDefaultLayoutParams(): RecyclerView.LayoutParams {
        return if (orientation == HORIZONTAL) {
            RecyclerView.LayoutParams(
                RecyclerView.LayoutParams.WRAP_CONTENT,
                RecyclerView.LayoutParams.MATCH_PARENT
            )
        } else {
            RecyclerView.LayoutParams(
                RecyclerView.LayoutParams.MATCH_PARENT,
                RecyclerView.LayoutParams.WRAP_CONTENT
            )
        }
    }
}
</code></pre>
<pre><code class="language-kotlin">class StackLayoutManager: RecyclerView.LayoutManager(){
      override fun generateDefaultLayoutParams(): RecyclerView.LayoutParams {
        return RecyclerView.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT
        )
    }
}
</code></pre>
<h4 id="onmeasureisautomeasureenabled_1">é‡å†™onMeasure()æˆ–isAutoMeasureEnabled()æ–¹æ³•ã€‚</h4>
<pre><code class="language-kotlin">class PickerLayoutManager:: RecyclerView.LayoutManager(){
      override fun onMeasure(
        recycler: RecyclerView.Recycler,
        state: RecyclerView.State,
        widthSpec: Int,
        heightSpec: Int
    ) {
        if (state.itemCount == 0) {
            super.onMeasure(recycler, state, widthSpec, heightSpec)
            return
        }
        if (state.isPreLayout) return

        //å‡å®šæ¯ä¸ªitemçš„å®½é«˜ä¸€ç›´ï¼Œæ‰€ä»¥ç”¨ç¬¬ä¸€ä¸ªviewè®¡ç®—å®½é«˜ï¼Œ
        //è¿™ç§æ–¹å¼å¯èƒ½ä¸å¤ªå¥½
        val itemView = recycler.getViewForPosition(0)
        addView(itemView)
        //è¿™é‡Œä¸èƒ½ç”¨measureChildæ–¹æ³•ï¼Œå…·ä½“çœ‹å†…éƒ¨æºç å®ç°ï¼Œå†…éƒ¨getWidthé»˜è®¤ä¸º0
//        measureChildWithMargins(itemView, 0, 0)
        itemView.measure(widthSpec, heightSpec)
        mItemWidth = getDecoratedMeasuredWidth(itemView)
        mItemHeight = getDecoratedMeasuredHeight(itemView)
        //å›æ”¶è¿™ä¸ªView
        detachAndScrapView(itemView, recycler)

        //è®¾ç½®å®½é«˜
        setWidthAndHeight(mItemWidth, mItemHeight)
    }

      private fun setWidthAndHeight(
        width: Int,
        height: Int
    ) {
        if (orientation == HORIZONTAL) {
            setMeasuredDimension(width * visibleCount, height)
        } else {
            setMeasuredDimension(width, height * visibleCount)
        }
    }
}
</code></pre>
<pre><code class="language-kotlin">class StackLayoutManager: RecyclerView.LayoutManager(){
      override fun isAutoMeasureEnabled(): Boolean {
        return true
    }
}
</code></pre>
<p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œ<code>PickerLayoutManager</code>é‡å†™äº†<code>onMeasure()</code>ï¼Œ<code>StackLayoutManager</code>é‡å†™äº†<code>isAutoMeasureEnabled()</code>æ–¹æ³•ï¼Œè·Ÿä¸Šé¢å¸¸è§è¯¯åŒºä¸­çš„è®²å¾—ä¸€è‡´ã€‚</p>
<h4 id="onlayoutchildrenview">é‡å†™onLayoutChildren()å¼€å§‹å¡«å……å­Viewã€‚</h4>
<p>ä»è¿™ä¸ªæ–¹æ³•å¼€å§‹ï¼Œ<a href="https://github.com/simplepeng/PickerLayoutManager">PickerLayoutManager</a>å’Œ<a href="https://github.com/simplepeng/StackLayoutManager">StackLayoutManager</a>çš„å¥—è·¯éƒ½æ˜¯ä¸€è‡´çš„ï¼šè®¡ç®—å‰©ä½™ç©ºé—´-&gt;addView()-&gt;measureView()-&gt;layoutView()ã€‚å› ä¸ºéƒ½æ˜¯æ¨¡ä»¿<code>LinearLayoutManager</code>çš„å†™æ³•ï¼Œæ‰€ä»¥ä¸‹é¢å¼€å§‹åªç”¨<code>StackLayoutManager</code>çš„<code>ä¼ªä»£ç </code>ä½œä»£ç ç¤ºä¾‹ï¼Œç‰¹åˆ«çš„åœ°æ–¹å†ç”¨ä¸åŒå®ç°çš„ä»£ç åšæ¯”è¾ƒã€‚</p>
<p>è®°ä½ä¸‹é¢çš„å¤§å¤šæ•°éƒ½æ˜¯<code>ä¼ªä»£ç </code>ï¼Œä¸è¦ç›´æ¥å¤åˆ¶è¿è¡Œï¼Œå› ä¸º<code>StackLayoutManager</code>æ”¯æŒçš„å±æ€§å¾ˆå¤šï¼ŒåŒ…æ‹¬äº†å¦‚åŒ<code>LinearLayoutManager</code>çš„<code>reverseLayout</code>å’Œ<code>orientation</code>ç­‰ï¼Œå¹¶ä¸”ä¸‹é¢çš„ç¤ºä¾‹åªä¼šè®²<code>orientation==HORIZONTAL</code>çš„ä»£ç å®ç°ï¼Œä¸»è¦æ˜¯æ€•ä»£ç é€»è¾‘å¤ªå¤æ‚ä¸å¥½ç†è§£ï¼Œæƒ³çœ‹å…·ä½“æºç çš„å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„æºç é“¾æ¥æŸ¥çœ‹ã€‚</p>
<pre><code class="language-kotlin">    override fun onLayoutChildren(recycler: RecyclerView.Recycler, state: RecyclerView.State) {

        //è½»é‡çº§çš„å°†viewç§»é™¤å±å¹•
        detachAndScrapAttachedViews(recycler)
        //å¼€å§‹å¡«å……view

        var totalSpace = width - paddingRight
        var currentPosition = 0

        var left = 0
        var top = 0
        var right = 0
        var bottom = 0
        //æ¨¡ä»¿LinearLayoutManagerçš„å†™æ³•ï¼Œå½“å¯ç”¨è·ç¦»è¶³å¤Ÿå’Œè¦å¡«å……
        //çš„itemViewçš„positionåœ¨åˆæ³•èŒƒå›´å†…æ‰å¡«å……View
        while (totalSpace &gt; 0 &amp;&amp; currentPosition &lt; state.itemCount) {
            val view = recycler.getViewForPosition(currentPosition)
            addView(view)
            measureChild(view, 0, 0)

            right = left + getDecoratedMeasuredWidth(view)
            bottom = top + getDecoratedMeasuredHeight(view)
            layoutDecorated(view, left, top, right, bottom)

            currentPosition++
            left += getDecoratedMeasuredWidth(view)
            //å…³é”®ç‚¹
            totalSpace -= getDecoratedMeasuredWidth(view)
        }
        //layoutå®Œæˆåè¾“å‡ºç›¸å…³ä¿¡æ¯
        logChildCount(&quot;onLayoutChildren&quot;, recycler)
    }
</code></pre>
<p>ä¸Šé¢çš„ä»£ç å¾ˆç®€å•äº†ï¼Œç›¸ä¿¡å†™è¿‡è‡ªå®šä¹‰ViewGroupçš„äººéƒ½èƒ½çœ‹æ‡‚ã€‚ä¸Šé¢ä»£ç å¾ˆç®€å•çš„å®ç°äº†ä¸€ä¸ª<code>æ¨ªå‘çš„LinearLayoutManager</code>ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img alt="img_blog_lm_on_layout.png" src="https://i.loli.net/2020/09/08/dOY2TqHgxeS1oL8.png" /></p>
<p>å¹¶ä¸”åœ¨<code>layout</code>ç»“æŸåï¼Œå¢åŠ äº†ä¸€ä¸ªè¾“å‡º<code>childCount</code>çš„æ–¹æ³•ã€‚</p>
<pre><code class="language-kotlin">    private fun logChildCount(tag: String, recycler: RecyclerView.Recycler) {
        Log.d(tag, &quot;childCount = $childCount -- scrapSize = ${recycler.scrapList.size}&quot;)
    }
</code></pre>
<blockquote>
<p>D/onLayoutChildren: childCount = 9 -- scrapSize = 0
D/onLayoutChildren: childCount = 9 -- scrapSize = 0
D/onLayoutChildren: childCount = 9 -- scrapSize = 0</p>
</blockquote>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬æ‘†æ”¾äº†position<code>0-8</code>çš„itemViewï¼Œæ‰€ä»¥<code>childCount=9</code>ï¼Œå¹¶ä¸”<code>scrapSize=0</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ä¸ªæ–¹æ³•å†™å¾—æ˜¯åˆæ ¼çš„ã€‚å› ä¸ºæˆ‘ä»¬ç”¨<code>totalSpace &gt; 0</code>ä½œäº†<code>while</code>è¡¨è¾¾å¼çš„åˆ¤æ–­ï¼Œæ‰€ä»¥å¹¶ä¸ç”¨å…³å¿ƒ<code>itemCount</code>æœ‰å¤šå¤§ã€‚</p>
<h4 id="canscrollhorizontallycanscrollvertically">é‡å†™canScrollHorizontally()å’ŒcanScrollVertically()æ–¹æ³•æ”¯æŒæ»‘åŠ¨ã€‚</h4>
<p>ä¸Šé¢å·²ç»åˆå§‹åŒ–æ‘†æ”¾äº†ä¸€äº›itemViewï¼Œä½†æ˜¯RecyclerViewè¿˜æ˜¯ä¸èƒ½æ»‘åŠ¨çš„ï¼Œä¸ä¿¡çš„å¯ä»¥è¯•è¯•ã€‚æˆ‘ä»¬å¿…é¡»é‡å†™ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ï¼ŒRecyclerViewæ‰ä¼šå°†æ»‘åŠ¨çš„äº‹ä»¶äº¤ç»™LayoutManagerã€‚</p>
<pre><code class="language-kotlin">    override fun canScrollHorizontally(): Boolean {
        return orientation == HORIZONTAL
    }

    override fun canScrollVertically(): Boolean {
        return orientation == VERTICAL
    }
</code></pre>
<p>æ²¡å•¥å¥½è¯´çš„ï¼Œæƒ³æ”¯æŒå“ªä¸ªæ–¹å‘çš„æ»‘åŠ¨ï¼Œå°±è¿”å›<code>true</code>ã€‚åŒæ—¶è¿”å›trueéƒ½å¯ä»¥ï¼Œé‚£å°±æ˜¯åŒæ—¶æ”¯æŒä¸Šä¸‹å·¦å³æ»‘åŠ¨ï¼Œç±»ä¼¼Daveå¤§ç¥é‚£ç§è¡¨æ ¼ç±»å‹çš„LayoutManagerã€‚</p>
<h4 id="scrollhorizontallybyscrollverticallybyviewview">é‡å†™scrollHorizontallyBy()å’ŒscrollVerticallyBy()æ–¹æ³•åœ¨æ»‘åŠ¨çš„æ—¶å€™å¡«å……viewå’Œå›æ”¶viewã€‚</h4>
<pre><code class="language-kotlin">override fun scrollHorizontallyBy(
    dx: Int,
    recycler: RecyclerView.Recycler,
    state: RecyclerView.State
): Int {
    return super.scrollHorizontallyBy(dx, recycler, state)
}
</code></pre>
<p>è¿™é‡Œå…ˆè®²ä¸€ä¸‹<code>scrollHorizontallyBy</code>å’Œ<code>scrollVerticallyBy</code>ä¸¤ä¸ªæ»‘åŠ¨æ–¹æ³•çš„æ¦‚å¿µï¼š</p>
<ul>
<li>æˆ‘çœ‹ä¸€äº›åšå®¢ä¸‹æœ‰äº›è¯„è®ºè¯´ï¼š"å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿä¸èƒ½æ»‘åŠ¨å•Šï¼"ï¼Œè¯´æ˜¯è¯´è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯æ»‘åŠ¨çš„æ–¹æ³•ï¼Œä½†æ˜¯å…¶å®è¿™ä¸¤ä¸ªæ–¹æ³•åªä¼šè¿”å›æ‰‹æŒ‡åœ¨RecyclerViewä¸Šçš„ç§»åŠ¨è·ç¦»ç»™æˆ‘ä»¬ï¼Œå°±æ˜¯æ–¹æ³•ä¸­å¯¹åº”çš„<code>dx</code>å’Œ<code>dy</code>ï¼Œ<code>dx&gt;0</code>å°±æ˜¯æ‰‹æŒ‡<code>ä»å³æ»‘å‘å·¦</code>ï¼Œ<code>dy&gt;0</code>å°±æ˜¯æ‰‹æŒ‡<code>ä»ä¸‹æ»‘å‘ä¸Š</code>ï¼ŒåŒç†<code>dx,dy&lt;0</code>åˆ™åï¼ŒçœŸæ­£ç§»åŠ¨Viewçš„äº‹æƒ…è¿˜æ˜¯è¦å¼€å‘è€…è‡ªå·±å®ç°ï¼Œ<code>LinearLayoutManager</code>ä¸­å°±ç®€å•çš„ç”¨<code>offsetChildren</code>æ–¹æ³•å®ç°çš„ç§»åŠ¨ã€‚æˆ–è€…ä¹Ÿæœ‰çš„è¯„è®ºè¯´ï¼š"LayoutManagerå°è£…çš„ä¸å¤Ÿåˆç†ï¼Œæ»‘åŠ¨è¿˜è¦æˆ‘ä»¬è‡ªå·±å®ç°ï¼"ï¼Œè®²é“ç†è¯´è¿™ç§è¯çš„å°æœ‹å‹è¿˜æ˜¯ä¸–é¢è§å°‘äº†ï¼Œä»–è‚¯å®šæ²¡è§è¿‡å¯ä»¥æ–œç€æ‹–çš„LayoutManagerï¼Œæˆ–è€…åœ¨æ»‘åŠ¨çš„æ—¶å€™å¯¹itemViewæœ‰ç§å„ç§å˜æ¢çš„LayoutManagerï¼Œå˜»å˜»ã€‚</li>
<li>ä¸¤ä¸ªæ–¹æ³•çš„<code>è¿”å›å€¼</code>åŒæ ·ä¹Ÿååˆ†é‡è¦ï¼Œè¿”å›å€¼å°±æ˜¯è®©RecyclerViewçŸ¥é“LayoutManagerçœŸå®çš„æ»‘åŠ¨è·ç¦»ï¼Œ<code>return 0</code>æ—¶RecyclerViewå°±ä¼šå±•ç¤º<code>overScorll</code>çŠ¶æ€ä»¥åŠ<code>NestedScrolling</code>çš„åç»­å¤„ç†ã€‚å…³äº<code>NestedScrolling</code>è¿™ç‚¹æˆ‘ä¹Ÿæ²¡å‘ç°æœ‰åšå®¢è®²åˆ°ï¼Œå•¥ï¼ŸoverScorllä½ ä¹Ÿä¸çŸ¥é“ï¼å‘Šè¾~</li>
</ul>
<p>æ·»åŠ <code>offsetChildrenHorizontal</code>æ–¹æ³•ï¼Œæ”¯æŒæ°´å¹³æ–¹å‘çš„æ»‘åŠ¨ã€‚å•¥ï¼Ÿä¸ºå•¥åˆæ˜¯<code>-dx</code>ï¼Œçœ‹çœ‹æºç æˆ–è€…å®éªŒå®éªŒä¸å°±çŸ¥é“äº†ã€‚</p>
<pre><code class="language-kotlin">    override fun scrollHorizontallyBy(
        dx: Int,
        recycler: RecyclerView.Recycler,
        state: RecyclerView.State
    ): Int {
        //ç§»åŠ¨View
        offsetChildrenHorizontal(-dx)
        return dx
    }
</code></pre>
<p><img alt="gif_blog_lm_sroll_horizontal.gif" src="https://i.loli.net/2020/09/08/zphtQDd26m9Kgik.gif" /></p>
<p>å°±è¿™ä¹ˆç®€å•ï¼Œæˆ‘ä»¬çš„LayoutManagerå·²ç»å¯ä»¥æ»‘åŠ¨äº†ã€‚ä½†æ˜¯éšä¹‹è€Œæ¥åˆå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šâ€œæ»‘åŠ¨åªæ˜¯åœ¨å·²å­˜åœ¨çš„è¿™å‡ ä¸ªchildrené—´æ»‘åŠ¨â€ã€‚è¿™ä¸æ˜¯åºŸè¯å—ï¼Œæˆ‘ä»¬éƒ½æ²¡å†™å¡«å……å’Œå›æ”¶Viewçš„æ–¹æ³•ï¼Œè‚¯å®šæ²¡æœ‰æ–°çš„itemViewæ·»åŠ è¿›æ¥å‘€ï¼Œè¶…è¿‡å±å¹•çš„Viewä¹Ÿä¸ä¼šå›æ”¶å‘€ã€‚ä¸‹é¢å¼€å§‹å¢åŠ å¡«å……Viewå’Œå›æ”¶Viewçš„ä»£ç å—ã€‚</p>
<pre><code class="language-kotlin">    override fun scrollHorizontallyBy(
        dx: Int,
        recycler: RecyclerView.Recycler,
        state: RecyclerView.State
    ): Int {

        //å¡«å……View
        fill(dx, recycler)
        //ç§»åŠ¨View
        offsetChildrenHorizontal(-dx)
        //å›æ”¶View
        recycle(dx, recycler)

        //è¾“å‡ºchildren
        logChildCount(&quot;scrollHorizontallyBy&quot;, recycler)
        return dx
    }
</code></pre>
<p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œåœ¨æ»‘åŠ¨çš„æ—¶å€™æˆ‘ä»¬çœŸæ­£åªåšäº†ä¸‰ä»¶äº‹ï¼Œ<code>å¡«å……View</code>-<code>ç§»åŠ¨View</code>-<code>å›æ”¶View</code>ï¼Œä¸€ä¸ªåˆæ ¼çš„LayoutManager<code>è‡³å°‘</code>æ˜¯åº”è¯¥åšè¶³è¿™ä¸‰ä»¶äº‹çš„ï¼Œå¹¶ä¸”é¡ºåºæœ€å¥½å¦‚ä¸Šé¢ä»£ç ä¸€æ ·<code>å…ˆå¡«å……-å†ç§»åŠ¨-æœ€åå›æ”¶</code>ï¼Œå½“ç„¶å¤æ‚çš„æƒ…å†µçš„LayoutManagerå¯ä»¥å¤šåŠ ä¸€äº›æ¡ä»¶æ£€æµ‹å’Œç‰¹æ®Šå¤„ç†ï¼Œä¾‹å¦‚<code>LinearLayoutManager</code>å°±æ˜¯<code>å…ˆå›æ”¶-å†å¡«å……-å†å›æ”¶-æœ€åç§»åŠ¨</code>ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆå†™å›æ”¶çš„æ–¹æ³•ï¼Œå› ä¸ºé€»è¾‘ç›¸å¯¹ç®€å•ç‚¹ã€‚</p>
<pre><code class="language-kotlin">    private fun recycle(
        dx: Int,
        recycler: RecyclerView.Recycler
    ) {
        //è¦å›æ”¶Viewçš„é›†åˆï¼Œæš‚å­˜
        val recycleViews = hashSetOf&lt;View&gt;()

        //dx&gt;0å°±æ˜¯æ‰‹æŒ‡ä»å³æ»‘å‘å·¦ï¼Œæ‰€ä»¥è¦å›æ”¶å‰é¢çš„children
        if (dx &gt; 0) {
            for (i in 0 until childCount) {
                val child = getChildAt(i)!!
                val right = getDecoratedRight(child)
                //itemViewçš„right&lt;0å°±æ˜¯è¦è¶…å‡ºå±å¹•è¦å›æ”¶View
                if (right &gt; 0) break
                recycleViews.add(child)
            }
        }

        //dx&lt;0å°±æ˜¯æ‰‹æŒ‡ä»å·¦æ»‘å‘å³ï¼Œæ‰€ä»¥è¦å›æ”¶åé¢çš„children
        if (dx &lt; 0) {
            for (i in childCount - 1 downTo 0) {
                val child = getChildAt(i)!!
                val left = getDecoratedLeft(child)

                //itemViewçš„left&gt;recyclerView.widthå°±æ˜¯è¦è¶…å‡ºå±å¹•è¦å›æ”¶View
                if (left &lt; width) break
                recycleViews.add(child)
            }
        }

        //çœŸæ­£æŠŠViewç§»é™¤æ‰
        for (view in recycleViews) {
            removeAndRecycleView(view, recycler)
        }
        recycleViews.clear()
    }
</code></pre>
<p><img alt="gif_blog_lm_sroll_recycle.gif" src="https://i.loli.net/2020/09/08/eDi39jlEJFLT2hr.gif" /></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨æ‹–åŠ¨æ˜¯æ—¶å€™ï¼ŒLayoutManagerç¡®å®å›æ”¶äº†è¶…å‡ºå±å¹•çš„itemViewï¼Œå¹¶ä¸”é€šè¿‡æŸ¥çœ‹logå¯çŸ¥childCountå’ŒscrapSizeåŒæ ·æ˜¯åˆæ ¼çš„ã€‚</p>
<blockquote>
<p>D/scrollHorizontallyBy: childCount = 2 -- scrapSize = 0</p>
</blockquote>
<p>æ¥ä¸‹æ¥æ‰æ˜¯é‡å¤´æˆï¼Œå¦‚ä½•åˆç†çš„å¡«å……Viewæ˜¯ä¸€é—¨å­¦é—®ã€‚é€šè¿‡æˆ‘é˜…è¯»<code>LinearLayoutManager</code>çš„æºç ï¼Œä¹Ÿæ€»ç»“å‡ºä¸€ä¸ªå¥—è·¯ï¼Œé‚£å°±æ˜¯ï¼š<code>è·å–é”šç‚¹Viewçš„position</code>ï¼Œ<code>è®¡ç®—æ–°çš„é”šç‚¹Viewçš„positionå’Œä½ç½®</code>ï¼Œç„¶åå’Œ<code>onLayoutChildren</code>æ–¹æ³•ä¸€æ ·<code>addView</code>ï¼Œ<code>measureView</code>ï¼Œ<code>layoutView</code>ã€‚</p>
<pre><code class="language-kotlin">    private fun fill(dx: Int, recycler: RecyclerView.Recycler): Int {
        //å°†è¦å¡«å……çš„position
        var fillPosition = RecyclerView.NO_POSITION
        //å¯ç”¨çš„ç©ºé—´ï¼Œå’ŒonLayoutChildrenä¸­çš„totalSpaceç±»ä¼¼
        var availableSpace = abs(dx)
        //å¢åŠ ä¸€ä¸ªæ»‘åŠ¨è·ç¦»çš„ç»å¯¹å€¼ï¼Œæ–¹ä¾¿è®¡ç®—
        val absDelta = abs(dx)

        //å°†è¦å¡«å……çš„Viewçš„å·¦ä¸Šå³ä¸‹
        var left = 0
        var top = 0
        var right = 0
        var bottom = 0

        //dx&gt;0å°±æ˜¯æ‰‹æŒ‡ä»å³æ»‘å‘å·¦ï¼Œæ‰€ä»¥å°±è¦å¡«å……å°¾éƒ¨
        if (dx &gt; 0) {
            val anchorView = getChildAt(childCount - 1)!!
            val anchorPosition = getPosition(anchorView)
            val anchorRight = getDecoratedRight(anchorView)

            left = anchorRight
            //å¡«å……å°¾éƒ¨ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªpositionå°±åº”è¯¥æ˜¯+1
            fillPosition = anchorPosition + 1

            //å¦‚æœè¦å¡«å……çš„positionè¶…è¿‡åˆç†èŒƒå›´å¹¶ä¸”æœ€åä¸€ä¸ªViewçš„
            //right-ç§»åŠ¨çš„è·ç¦» &lt; å³è¾¹ç¼˜(width)é‚£å°±è¦ä¿®æ­£çœŸå®èƒ½ç§»åŠ¨çš„è·ç¦»
            if (fillPosition &gt;= itemCount &amp;&amp; anchorRight - absDelta &lt; width) {
                val fixScrolled = anchorRight - width
                Log.d(&quot;scrollHorizontallyBy&quot;, &quot;fill == $fixScrolled&quot;)
                return fixScrolled
            }

            //å¦‚æœå°¾éƒ¨çš„é”šç‚¹ä½ç½®å‡å»dxè¿˜æ˜¯åœ¨å±å¹•å¤–ï¼Œå°±ä¸å¡«å……ä¸‹ä¸€ä¸ªView
            if (anchorRight - absDelta &gt; width) {
                return dx
            }
        }

        //dx&lt;0å°±æ˜¯æ‰‹æŒ‡ä»å·¦æ»‘å‘å³ï¼Œæ‰€ä»¥å°±è¦å¡«å……å¤´éƒ¨
        if (dx &lt; 0) {
            val anchorView = getChildAt(0)!!
            val anchorPosition = getPosition(anchorView)
            val anchorLeft = getDecoratedLeft(anchorView)

            right = anchorLeft
            //å¡«å……å¤´éƒ¨ï¼Œé‚£ä¹ˆä¸Šä¸€ä¸ªpositionå°±åº”è¯¥æ˜¯-1
            fillPosition = anchorPosition - 1

            //å¦‚æœè¦å¡«å……çš„positionè¶…è¿‡åˆç†èŒƒå›´å¹¶ä¸”ç¬¬ä¸€ä¸ªViewçš„
            //left+ç§»åŠ¨çš„è·ç¦» &gt; å·¦è¾¹ç¼˜(0)é‚£å°±è¦ä¿®æ­£çœŸå®èƒ½ç§»åŠ¨çš„è·ç¦»
            if (fillPosition &lt; 0 &amp;&amp; anchorLeft + absDelta &gt; 0) {
                return anchorLeft
            }

            //å¦‚æœå¤´éƒ¨çš„é”šç‚¹ä½ç½®åŠ ä¸Šdxè¿˜æ˜¯åœ¨å±å¹•å¤–ï¼Œå°±ä¸å¡«å……ä¸Šä¸€ä¸ªView
            if (anchorLeft + absDelta &lt; 0) {
                return dx
            }
        }

        //æ ¹æ®é™å®šæ¡ä»¶ï¼Œä¸åœåœ°å¡«å……Viewè¿›æ¥
        while (availableSpace &gt; 0 &amp;&amp; (fillPosition in 0 until itemCount)) {
            val itemView = recycler.getViewForPosition(fillPosition)

            if (dx &gt; 0) {
                addView(itemView)
            } else {
                addView(itemView, 0)
            }

            measureChild(itemView, 0, 0)

            if (dx &gt; 0) {
                right = left + getDecoratedMeasuredWidth(itemView)
            } else {
                left = right - getDecoratedMeasuredWidth(itemView)
            }

            bottom = top + getDecoratedMeasuredHeight(itemView)
            layoutDecorated(itemView, left, top, right, bottom)

            if (dx &gt; 0) {
                left += getDecoratedMeasuredWidth(itemView)
                fillPosition++
            } else {
                right -= getDecoratedMeasuredWidth(itemView)
                fillPosition--
            }

            if (fillPosition in 0 until itemCount) {
                availableSpace -= getDecoratedMeasuredWidth(itemView)
            }
        }

        return dx
    }
</code></pre>
<p>ä¸Šé¢çš„ä»£ç æˆ‘æ•…æ„å†™å¾—å¾ˆå•°å—¦ï¼Œåº”è¯¥å¾ˆå¥½ç†è§£äº†ã€‚è€Œä¸”èªæ˜çš„å®å®åº”è¯¥å‘ç°äº†è¿™ä¸ª<code>fill</code>æ–¹æ³•è·Ÿ<code>onLayoutChildren</code>çš„æ–¹æ³•æ˜¯å¾ˆè€¦åˆçš„ï¼Œå…¶å®æ˜¯å¯ä»¥åˆå¹¶æˆä¸€ä¸ªçš„ï¼Œå°±åƒ<code>LinearLayoutManager</code>çš„<code>fill</code>æ–¹æ³•ä¸€æ ·ã€‚è¿˜æœ‰å°±æ˜¯å†æ¬¡è®°ä½ä¸Šé¢çš„ä»£ç æ˜¯ç”¨æ¥è®²è§£çš„ä¼ªä»£ç ï¼Œå¹¶ä¸æ˜¯<code>StackLayoutManager</code>çš„çœŸå®ä»£ç ï¼Œä¸ºäº†å®¹æ˜“ç†è§£ï¼Œæˆ‘åˆ é™¤äº†å¤§é‡çš„æ£€æµ‹æ–¹æ³•ï¼Œä»¥åŠå†™çš„éå¸¸å•°å—¦ã€‚</p>
<p><img alt="gif_blog_lm_sroll_fill.gif" src="https://i.loli.net/2020/09/08/ZarPh2Fvwli8ySt.gif" /></p>
<blockquote>
<p>D/scrollHorizontallyBy: childCount = 9 -- scrapSize = 0
D/scrollHorizontallyBy: childCount = 10 -- scrapSize = 0</p>
</blockquote>
<p>ç°åœ¨æˆ‘ä»¬çš„LayoutManagerå°±ä»¥åŠæ”¯æŒäº†åœ¨æ»‘åŠ¨çš„æ—¶å€™å¡«å……Viewå’Œå›æ”¶Viewï¼Œå¹¶ä¸”childCountä¾ç„¶æ˜¯åˆæ ¼çš„ã€‚</p>
<p>å‰©ä¸‹çš„å°±æ˜¯è¾¹ç•Œæ£€æµ‹è®©å…¶æ”¯æŒ<code>overScrollMode</code>äº†ï¼Œç»†å¿ƒçš„å°æœ‹å‹å·²ç»å‘ç°<code>fill</code>æ–¹æ³•å…¶å®æœ‰ä¸€ä¸ª<code>Int</code>çš„è¿”å›å€¼ï¼Œé‚£ä¹ˆç°åœ¨<code>offsetChildren</code>å’Œ<code>scrollHorizontallyBy</code>çš„è¿”å›å€¼éƒ½ä½¿ç”¨<code>fill</code>æ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
<pre><code class="language-kotlin">    override fun scrollHorizontallyBy(
        dx: Int,
        recycler: RecyclerView.Recycler,
        state: RecyclerView.State
    ): Int {

        //å¡«å……Viewï¼Œconsumedå°±æ˜¯ä¿®å¤åçš„ç§»åŠ¨å€¼
        val consumed = fill(dx, recycler)
        //ç§»åŠ¨View
        offsetChildrenHorizontal(-consumed)
        //å›æ”¶View
        recycle(consumed, recycler)

        //è¾“å‡ºchildren
        logChildCount(&quot;scrollHorizontallyBy&quot;, recycler)
        return consumed
    }
</code></pre>
<p><img alt="gif_blog_lm_sroll_fill_edge.gif" src="https://i.loli.net/2020/09/09/GWID8K5csQyzYAo.gif" /></p>
<p>å°±è¿™æ ·ç®€å•ï¼Œè¾¹ç¼˜æ£€æµ‹ä¹Ÿå®Œæˆäº†ã€‚</p>
<h4 id="scrolltopositionsmoothscrolltoposition_1">scrollToPosition()å’ŒsmoothScrollToPosition()æ–¹æ³•æ”¯æŒã€‚</h4>
<h5 id="scrolltoposition">é€‚é… scrollToPosition()</h5>
<p>æºç æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œæˆ‘ä»¬çœ‹çœ‹<code>LinearLayoutManager</code>çš„<code>scrollToPosition()</code>æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<pre><code class="language-java">    //LinearLayoutManager
        @Override
    public void scrollToPosition(int position) {
        mPendingScrollPosition = position;
        mPendingScrollPositionOffset = INVALID_OFFSET;
        if (mPendingSavedState != null) {
            mPendingSavedState.invalidateAnchor();
        }
        requestLayout();
    }
</code></pre>
<p>åŸæ¥è¿™ä¹ˆç®€å•çš„å—ï¼Ÿå†çœ‹çœ‹<code>mPendingScrollPosition</code>æ˜¯ä¸ªå•¥ã€‚</p>
<pre><code class="language-java">    /**
     * When LayoutManager needs to scroll to a position, it sets this variable and requests a
     * layout which will check this variable and re-layout accordingly.
     */
    int mPendingScrollPosition = RecyclerView.NO_POSITION;
</code></pre>
<p>ä»è‹±æ–‡æ³¨é‡Šçš„å¤§æ¦‚çš„æ„æ€å°±æ˜¯<code>mPendingScrollPosition</code>æ˜¯è¦scorllåˆ°çš„positionï¼Œé‚£æˆ‘ä»¬ç»§ç»­æ‰¾å®ƒæ˜¯åœ¨å“ªé‡Œè°ƒç”¨çš„ã€‚åœ¨ä¸€è¿ä¸²çš„æœç´¢åï¼Œæˆ‘å‘ç°äº†åç‚¹ã€‚</p>
<pre><code class="language-java">    private boolean updateAnchorFromPendingData(RecyclerView.State state, AnchorInfo anchorInfo) {
        if (state.isPreLayout() || mPendingScrollPosition == RecyclerView.NO_POSITION) {
            return false;
        }
        // validate scroll position
        if (mPendingScrollPosition &lt; 0 || mPendingScrollPosition &gt;= state.getItemCount()) {
            mPendingScrollPosition = RecyclerView.NO_POSITION;
            mPendingScrollPositionOffset = INVALID_OFFSET;
            if (DEBUG) {
                Log.e(TAG, &quot;ignoring invalid scroll position &quot; + mPendingScrollPosition);
            }
            return false;
        }

        // if child is visible, try to make it a reference child and ensure it is fully visible.
        // if child is not visible, align it depending on its virtual position.
        anchorInfo.mPosition = mPendingScrollPosition;
      ...
    }
</code></pre>
<p>è¿™ä¸ª<code>updateAnchorFromPendingData()</code>æ–¹æ³•æœ‰å¤šå±‚è°ƒç”¨æ ˆï¼Œä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯åœ¨<code>onLayoutChildren()</code>æ–¹æ³•ä¸­è°ƒç”¨çš„ã€‚è¿˜è®°å¾—æˆ‘ä»¬æœ€å¼€å§‹åœ¨<code>onLayuoutChildren()</code>æœ‰ä¸ª<code>currentPosition = 0</code>çš„å˜é‡å—ï¼Œé‚£ä¸ªå˜é‡å°±ç›¸å½“äºè¿™é‡Œçš„<code>anchorInfo.mPosition</code>ï¼Œå°±æ˜¯<code>é”šç‚¹çš„position</code>ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¾—å‡ºå¦‚ä½•é€‚é…scrollToPositionçš„ç»“è®ºï¼šå¢åŠ mPendingScrollPositionå˜é‡ï¼Œåœ¨scrollToPosition()æ–¹æ³•ä¸­å¯¹å…¶èµ‹å€¼ï¼Œè°ƒç”¨requestLayout()æ–¹æ³•ï¼Œç„¶åonLayoutChildren()æ–¹æ³•ä¼šå†æ¬¡å›è°ƒï¼Œè¿™æ—¶å¯¹é”šç‚¹positioné‡æ–°èµ‹å€¼ï¼Œè®°ä½ä¸€å®šåšå¥½positionçš„åˆæ³•æ ¡éªŒã€‚</p>
<pre><code class="language-kotlin">        private var mPendingPosition = RecyclerView.NO_POSITION

    override fun onLayoutChildren(recycler: RecyclerView.Recycler, state: RecyclerView.State) {
                ...çœç•¥ä»£ç 

        var currentPosition = 0
        if (mPendingPosition != RecyclerView.NO_POSITION){
            currentPosition = mPendingPosition
        }

        ...çœç•¥ä»£ç 
    }

    override fun scrollToPosition(position: Int) {
        if (position &lt; 0 || position &gt;= itemCount) return
        mPendingPosition = position
        requestLayout()
    }
</code></pre>
<p><img alt="gif_blog_lm_sroll_to_position.gif" src="https://i.loli.net/2020/09/10/jN8VHoMxGePBhA7.gif" /></p>
<p>ä»”ç»†çœ‹ï¼Œæˆ‘ä»¬çš„LayoutManageræ˜¯ä¸æ˜¯å¯ä»¥scrollToPositionäº†ã€‚ä½†æ˜¯è¿™è¿˜ä¸æ˜¯å®Œæ•´çš„å®ç°ï¼Œå¦‚æœä½ ä»”ç»†å¯¹æ¯”<code>LinearLayuotManager</code>çš„scrollToPositionå°±èƒ½å‘ç°å·®åˆ«æ‰€åœ¨ï¼Œæˆ‘è¿™é‡Œåªæ˜¯æŠ›ç –å¼•ç‰ä¸€ä¸‹ï¼Œèƒ½è®©å¤§å®¶çŸ¥é“å¦‚ä½•é€‚é…scrollToPositionå°±è¡Œäº†ï¼Œå®Œæ•´çš„å®ç°å¤§å¤šæ•°å°±æ˜¯ç»†èŠ‚çš„å¤„ç†ï¼Œå’Œå¥—è·¯æ— å…³ï¼Œå¬æ‡‚æŒå£°ğŸ‘ğŸ‘ğŸ‘ğŸ‘ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹æˆ‘çœ‹å¤§å¤šæ•°çš„åšå®¢ä¹Ÿæ²¡è®²åˆ°ï¼Œé‚£å°±æ˜¯<code>onLayoutCompleted()</code>è¿™ä¸ªæ–¹æ³•å…¶å®æŒºæœ‰ç”¨çš„ï¼Œä¸ºå•¥æ²¡äººè¯´å‘¢ï¼Ÿ<code>onLayoutCompleted</code>ä¼šåœ¨LayoutManagerè°ƒç”¨å®Œ<code>onLayoutChildren()</code>åè°ƒç”¨ï¼Œå¯ä»¥ç”¨æ¥åšå¾ˆå¤šæ”¶å°¾çš„å·¥ä½œã€‚ä¾‹å¦‚ï¼šé‡ç½®mPendingScrollPositionçš„å€¼</p>
<pre><code class="language-java">    //LinearLayoutManager
        @Override
    public void onLayoutCompleted(RecyclerView.State state) {
        super.onLayoutCompleted(state);
        mPendingSavedState = null; // we don't need this anymore
        mPendingScrollPosition = RecyclerView.NO_POSITION;
        mPendingScrollPositionOffset = INVALID_OFFSET;
        mAnchorInfo.reset();
    }
</code></pre>
<h5 id="smoothscrolltoposition">é€‚é…smoothScrollToPosition()</h5>
<p>ç»§ç»­æ‰’<code>LinearLayuotManager</code>çš„<code>smoothScrollToPosition</code>çš„æºç ã€‚</p>
<pre><code class="language-java">    //LinearLayuotManager
        @Override
    public void smoothScrollToPosition(RecyclerView recyclerView, RecyclerView.State state,
            int position) {
        LinearSmoothScroller linearSmoothScroller =
                new LinearSmoothScroller(recyclerView.getContext());
        linearSmoothScroller.setTargetPosition(position);
        startSmoothScroll(linearSmoothScroller);
    }
</code></pre>
<p>ä¹æŠ˜ï¼Ÿä¸ç®¡äº†ï¼Œç›´æ¥å¤åˆ¶ï¼Œç²˜è´´ï¼Œå†çœ‹æ•ˆæœï¼Œæ¯•ç«Ÿç¥–ä¼ CVå·¥ç¨‹å¸ˆå²‚éæµªå¾—è™šåã€‚</p>
<pre><code class="language-kotlin">    override fun smoothScrollToPosition(
        recyclerView: RecyclerView,
        state: RecyclerView.State,
        position: Int
    ) {
        val linearSmoothScroller =
            LinearSmoothScroller(recyclerView.context)
        linearSmoothScroller.targetPosition = position
        startSmoothScroll(linearSmoothScroller)
    }
</code></pre>
<p><img alt="gif_blog_lm_smooth_sroll_to_position_1.gif" src="https://i.loli.net/2020/09/10/7Ri96fjVWIbXaFT.gif" /></p>
<p>å’¦ï¼è¿™ä¸æ˜¯scrollToPositionçš„æ•ˆæœå—ï¼Ÿä¹Ÿä¸æ˜¯æˆ‘ä»¬smoothScrollçš„å¹³æ»‘æ•ˆæœå‘€ã€‚äºæ˜¯æˆ‘ç»§ç»­çœ‹åšå®¢ï¼Œç¿»æºç ï¼Œä¹Ÿè¿˜æ˜¯çœ‹åˆ°äº†Daveå¤§ç¥çš„åšå®¢æ‰æ‰¾åˆ°äº†çœŸæ­£çš„é‡ç‚¹<code>computeScrollVectorForPosition(int targetPosition)</code>è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°±åœ¨<code>LinearLayoutManager</code>çš„<code>smoothScrollToPosition</code>æ–¹æ³•ä¸‹é¢ï¼Œä½†æ˜¯æ²¡æœ‰æ³¨é‡Šï¼Œæ˜¯çœŸéš¾è®©äººçŒœã€‚</p>
<pre><code class="language-java">    @Override
    public PointF computeScrollVectorForPosition(int targetPosition) {
        if (getChildCount() == 0) {
            return null;
        }
        final int firstChildPos = getPosition(getChildAt(0));
        final int direction = targetPosition &lt; firstChildPos != mShouldReverseLayout ? -1 : 1;
        if (mOrientation == HORIZONTAL) {
            return new PointF(direction, 0);
        } else {
            return new PointF(0, direction);
        }
    }
</code></pre>
<p>è¿™ä¸ª<code>computeScrollVectorForPosition</code>æ–¹æ³•æ˜¯<code>SmoothScroller</code>ç±»çš„ä¸€ä¸ªæ–¹æ³•ã€‚<code>LinearSmoothScroller</code>åˆæ˜¯ç»§æ‰¿äº<code>SmoothScroller</code>ã€‚</p>
<pre><code class="language-java">        @Nullable
        public PointF computeScrollVectorForPosition(int targetPosition) {
            LayoutManager layoutManager = getLayoutManager();
            if (layoutManager instanceof ScrollVectorProvider) {
                return ((ScrollVectorProvider) layoutManager)
                        .computeScrollVectorForPosition(targetPosition);
            }
            Log.w(TAG, &quot;You should override computeScrollVectorForPosition when the LayoutManager&quot;
                    + &quot; does not implement &quot; + ScrollVectorProvider.class.getCanonicalName());
            return null;
        }
</code></pre>
<p>ä»æºç æ¥çœ‹ï¼Œåˆåœ¨åˆ¤æ–­LayoutManageræ˜¯å¦æ˜¯ScrollVectorProviderçš„å­ç±»ã€‚å¦‚æœæ˜¯å°±æ‰§è¡ŒcomputeScrollVectorForPositionæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™æ ·æ¥è¯´çš„è¯LinearLayoutManagerè‚¯å®šå®ç°äº†ScrollVectorProvideræ¥å£ã€‚</p>
<pre><code class="language-java">public class LinearLayoutManager extends RecyclerView.LayoutManager implements
        ItemTouchHelper.ViewDropHandler, RecyclerView.SmoothScroller.ScrollVectorProvider {
</code></pre>
<p>æœç„¶å’Œæˆ‘ä»¬çŒœæƒ³çš„ä¸€æ ·ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿç»§ç»­æ¨¡ä»¿è¿™ç§å†™æ³•ã€‚</p>
<pre><code class="language-kotlin">class BlogLayoutManager : RecyclerView.LayoutManager() ,RecyclerView.SmoothScroller.ScrollVectorProvider{
          override fun computeScrollVectorForPosition(targetPosition: Int): PointF? {
        if (childCount == 0) {
            return null
        }
        val firstChildPos = getPosition(getChildAt(0)!!)
        val direction = if (targetPosition &lt; firstChildPos) -1 else 1
        return PointF(direction.toFloat(), 0f)
    }
}
</code></pre>
<p><img alt="gif_blog_lm_smooth_sroll_to_position_2.gif" src="https://i.loli.net/2020/09/10/laMBNjeKUXdvGV6.gif" /></p>
<p>ç»†å¿ƒçš„å°æœ‹å‹åˆå‘ç°äº†ï¼Œæˆ‘ä»¬å¹³æ»‘æ»šåŠ¨åˆ°<code>50</code>è¿™ä¸ªpositionï¼Œä½†æ˜¯<code>50</code>æ˜¯é ååœæ­¢çš„ï¼Œå¹¶ä¸æ˜¯æ»šåŠ¨åˆ°å‰é¢è¾¹ç¼˜çš„ä½ç½®åœæ­¢ã€‚æ²¡é”™ï¼Œæ­£ç¡®çš„æ•ˆæœå°±æ˜¯è¿™æ ·ï¼ŒåŒ…æ‹¬<code>LinearLayoutManager</code>çš„<code>smoothScrollToPosition</code>çš„æ•ˆæœä¹Ÿæ˜¯è¿™æ ·ã€‚æ‰€ä»¥å‰é¢æˆ‘æ‰ä¼šè¯´<code>scrollToPosition</code>çš„å®ç°ä¸æ˜¯å®Œæ•´æ•ˆæœï¼Œå®Œæ•´æ•ˆæœåº”è¯¥å’Œ<code>smoothScrollToPosition</code>ä¸€æ ·ï¼ŒscrollToPositionåˆ°åé¢çš„positionå°±æ˜¯åº”è¯¥<code>ä»åå¾€å‰å¡«å……</code>ï¼ŒscrollToPositionåˆ°å‰é¢çš„positionæ‰æ˜¯<code>ä»å‰å¾€åå¡«å……</code>ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬è®²è®²<code>computeScrollVectorForPosition</code>è¿™ä¸ªæ–¹æ³•é‡Œé¢çš„å®ç°å¥—è·¯ã€‚</p>
<pre><code class="language-kotlin">val firstChildPos = getPosition(getChildAt(0)!!)
val direction = if (targetPosition &lt; firstChildPos) -1 else 1
return PointF(direction.toFloat(), 0f)
</code></pre>
<p>é€šè¿‡æˆ‘é˜…è¯»æºç æ³¨é‡Šå¾—çŸ¥ï¼Œé‡ç‚¹å°±åœ¨è¿™ä¸ª<code>PointF</code>çš„è¿”å›å€¼ï¼Œæºç æ³¨é‡Šä¸­å‘Šè¯‰æˆ‘ä»¬å‘é‡çš„å¤§å°å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯<code>targetPosition</code>å’Œ<code>å‘é‡çš„æ–¹å‘</code>ï¼Œ<code>PointF</code>çš„<code>x</code>ä»£è¡¨æ°´å¹³æ–¹å‘ï¼Œ<code>y</code>ä»£è¡¨ç«–ç›´æ–¹å‘ã€‚<code>æ•´æ•°</code>ä»£è¡¨æ­£å‘ç§»åŠ¨ï¼Œ<code>è´Ÿæ•°</code>ä»£è¡¨åå‘ç§»åŠ¨ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä»£ç ä¸­çš„<code>direction</code>ã€‚ä½†æ˜¯å…¶å®è¿™ä¸ªè¯´æ³•ä¹Ÿä¸æ˜¯å…¨å¯¹ï¼Œå¦‚æœä½ éœ€è¦è€Œä¸”èƒ½å¤Ÿç®—å‡ºç²¾ç¡®çš„ç§»åŠ¨å€¼ï¼Œé‚£å°±å¯ä»¥ç›´æ¥ä¼ é€’ç²¾ç¡®çš„å€¼ç»™<code>PointF</code>ã€‚</p>
<h4 id="onlayoutchildren_1">è§£å†³è½¯é”®ç›˜å¼¹å‡ºæˆ–æ”¶èµ·onLayoutChildren()æ–¹æ³•é‡æ–°è°ƒç”¨çš„é—®é¢˜ã€‚</h4>
<p>è¿™ä¸ªé—®é¢˜æˆ‘ä¹Ÿæ˜¯æ— æ„ä¸­å‘ç°çš„ã€‚</p>
<p><img alt="gif_blog_lm_keyborad.gif" src="https://i.loli.net/2020/09/10/PO7J4EVCkbtjpHu.gif" /></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨æ»šåŠ¨ä¸€æ®µè·ç¦»åï¼Œè®©è½¯é”®ç›˜å¼¹å‡ºï¼Œå‘ç°LayoutManagerè‡ªåŠ¨å›åˆ°<code>position=0</code>é‚£é‡Œï¼Œå†æ»šåŠ¨ä¸€æ®µè·ç¦»ï¼Œè½¯é”®ç›˜æ”¶èµ·ï¼ŒLayoutManageråˆè‡ªåŠ¨å›åˆ°<code>position=0</code>é‚£é‡Œã€‚åˆ†æåŸå› å¯ä»¥çŸ¥é“æ˜¯<code>onLayoutChildren</code>æ–¹æ³•è¢«é‡æ–°è°ƒç”¨å¯¼è‡´ï¼Œå› ä¸º<code>onLayoutChildren</code>æ–¹æ³•ä¸­æˆ‘ä»¬çš„<code>currentPosition=0</code>ï¼Œæ‰€ä»¥å¯¼è‡´äº†LayoutManagerä»0å¼€å§‹é‡æ–°å¸ƒå±€ã€‚ä¸‹é¢æˆ‘ä»¬å¼€å§‹ä¿®æ­£positionä¸ºçœŸå®æ»šåŠ¨åçš„å€¼ã€‚</p>
<pre><code class="language-kotlin">    override fun onLayoutChildren(recycler: RecyclerView.Recycler, state: RecyclerView.State) {

        var totalSpace = width - paddingRight

        var currentPosition = 0

        //å½“childCount != 0æ—¶ï¼Œè¯æ˜æ˜¯å·²ç»å¡«å……è¿‡Viewçš„ï¼Œå› ä¸ºæœ‰å›æ”¶
        //æ‰€ä»¥ç›´æ¥èµ‹å€¼ä¸ºç¬¬ä¸€ä¸ªchildçš„positionå°±å¯ä»¥
        if (childCount != 0) {
            currentPosition = getPosition(getChildAt(0)!!)
        }

        if (mPendingPosition != RecyclerView.NO_POSITION) {
            currentPosition = mPendingPosition
        }

        //è½»é‡çº§çš„å°†viewç§»é™¤å±å¹•
        detachAndScrapAttachedViews(recycler)

        //å¼€å§‹å¡«å……view
        var left = 0
      ...çœç•¥ä»£ç 
    }
</code></pre>
<p>ä¸Šé¢ç¤ºä¾‹ä»£ç æ³¨æ„<code>detachAndScrapAttachedViews(recycler)</code>æ–¹æ³•æ˜¯åœ¨<code>ä¿®æ­£position</code>æ–¹æ³•çš„åé¢ï¼Œå› ä¸ºå…ˆè°ƒç”¨<code>detachAndScrapAttachedViews</code>åï¼ŒchildCountå°±ä¼šä¸€ç›´ä¸º<code>0</code>å•Šï¼</p>
<p><img alt="gif_blog_lm_keyborad_fix.gif" src="https://i.loli.net/2020/09/10/Af4yXWcCgY8n7ko.gif" /></p>
<p>è¿˜æ˜¯å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æ‹–åŠ¨åˆ°äº†<code>position=25</code>çš„itemViewé‚£é‡Œï¼Œç„¶åè½¯é”®ç›˜å¼¹èµ·<code>onLayoutChildren</code>è°ƒç”¨ï¼Œè¿™æ¬¡çš„ç¡®æ˜¯ä»<code>currentPosition=25</code>å¼€å§‹é‡æ–°å¸ƒå±€ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨è¿™ä¸ªæ–¹æ³•ä¹Ÿè¿˜æ˜¯æœ‰ç‘•ç–µï¼Œä»”ç»†çœ‹å›¾ï¼Œæˆ‘ä»¬å‘ç°<code>position=25</code>çš„itemViewæ˜æ˜è¢«æ‹–åŠ¨äº†ä¸€èˆ¬çš„å®½åº¦åˆ°å±å¹•å¤–ï¼Œä½†æ˜¯é‡æ–°<code>onLayoutChildren</code>æ—¶ï¼Œåˆæ˜¯ä»å±å¹•å·¦è¾¹ç¼˜å¼€å§‹layoutViewäº†ã€‚é‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥å­¦ä¹ <code>LinearLayoutManager</code>çš„è§£å†³åŠæ³•ï¼Œå¼€å§‹è·å–ä¸€ä¸ª<code>fixOffset</code>çš„å€¼ï¼Œåœ¨é‡æ–°layoutç»“æŸå»ç§»åŠ¨è¿™ä¸ªå€¼çš„è·ç¦»ï¼Œ<code>LinearLayoutManager</code>æ˜¯å°†æ»‘åŠ¨ï¼Œå¡«å……ï¼Œå›æ”¶å°è£…æˆäº†ä¸€ä¸ª<code>scrollBy()</code>æ–¹æ³•ï¼Œç„¶ååœ¨layoutç»“æŸè°ƒç”¨scrollByæ–¹æ³•å»ä¿®æ­£åç§»é‡ï¼Œè¿™ä¹ˆåšå¯ä»¥è§£å†³åç§»æ»‘åŠ¨çš„åŒæ—¶å¡«å……å’Œå›æ”¶Viewï¼Œæˆ‘è¿™é‡Œå·ä¸ªæ‡’ï¼Œç›´æ¥ç”¨<code>offsetChildren</code>å»ä¿®æ­£ä¸€ä¸‹åç§»é‡ã€‚</p>
<pre><code class="language-kotlin">    override fun onLayoutChildren(recycler: RecyclerView.Recycler, state: RecyclerView.State) {

        var totalSpace = width - paddingRight

        var currentPosition = 0
        var fixOffset = 0

        //å½“childCount != 0æ—¶ï¼Œè¯æ˜æ˜¯å·²ç»å¡«å……è¿‡Viewçš„ï¼Œå› ä¸ºæœ‰å›æ”¶
        //æ‰€ä»¥ç›´æ¥èµ‹å€¼ä¸ºç¬¬ä¸€ä¸ªchildçš„positionå°±å¯ä»¥
        if (childCount != 0) {
            currentPosition = getPosition(getChildAt(0)!!)
            fixOffset = getDecoratedLeft(getChildAt(0)!!)
        }
                //...çœç•¥ä»£ç 
        offsetChildrenHorizontal(fixOffset)
    }
</code></pre>
<p><img alt="gif_blog_lm_keyborad_fix_2.gif" src="https://i.loli.net/2020/09/10/vqFE3rkwBot1DVi.gif" /></p>
<p>OK~ï¼Œæ”¶å·¥ï¼å•¥ï¼Ÿè¦å®ç°çš„ä¸€ä¸ª<code>StackLayoutManager</code>ï¼Œä¸ºå•¥ä½ è¿™ä¸ªæ˜¯<code>LinearLayoutManger</code>ï¼éƒ½çœ‹åˆ°è¿™é‡Œäº†å¦‚æœä½ è¿˜èƒ½æœ‰è¿™ç§é—®é¢˜ï¼Œè¯æ˜æˆ‘å†™äº†ä¸€ç¯‡æ°´æ–‡ï¼Œé€ƒ~</p>
<p><a href="https://github.com/simplepeng/StackLayoutManager/blob/master/app/src/main/java/demo/simple/stacklayoutmanager/BlogLayoutManager.kt">ä¸Šé¢çš„ä¼ªä»£ç ç¤ºä¾‹</a></p>
<h2 id="_1">æœ€å</h2>
<p>å­¦ä¹ è‡ªå®šä¹‰LayoutManagerçš„æ”¶è·æŒºå¤šçš„ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›é€»è¾‘ä¸Šçš„å¤„ç†ï¼Œç”±è¡·çš„ä½©æœRecyclerViewçš„ä½œè€…ï¼ŒçœŸçš„å•¥æƒ…å†µéƒ½è€ƒè™‘åˆ°äº†ã€‚è™½ç„¶è¯´æ—¥å¸¸ä½¿ç”¨RecyclerViewè‡ªå¸¦çš„é‚£å‡ ä¸ªLayoutManagerå°±å¤Ÿç”¨äº†ï¼Œä½†æ˜¯å­¦ä¹ ä¸€ä¸‹è‡ªå®šä¹‰LayoutManagerä¹Ÿä¸å¦¨ï¼Œè€Œä¸”æ·±å…¥äº†è¿˜å¯ä»¥åŒæ—¶åŠ æ·±å¯¹RecyclerViewçš„ç†è§£ï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢~</p>
<p>ä»å¼€å§‹å­¦ä¹ è‡ªå®šä¹‰LayoutManagerï¼Œåˆ°å†™äº†å‡ ä¸ªå¼€æºåº“ï¼Œå†åˆ°å®Œæˆè¿™ç¯‡æ–‡ç« ï¼Œæ–­æ–­ç»­ç»­èŠ±äº†ä¸€ä¸ªå¤šæœˆå§ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ä½ ï¼Œå¸®å¿™ç»™æ–‡ç« ç‚¹ä¸ªèµæˆ–è€…ç»™å¼€æºåº“ä¸€ä¸ªstarå§ï¼Œè®©æˆ‘çŸ¥é“ä»˜å‡ºè¿˜æ˜¯ä¼šæœ‰æ”¶è·çš„ï¼Œè°¢è°¢~</p>
<p>https://github.com/simplepeng/StackLayoutManager</p>
<p>https://github.com/simplepeng/PickerLayoutManager</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../%E5%9C%A8Activity%E7%9A%84onCreate%E6%96%B9%E6%B3%95%E4%B8%AD%E8%B0%83%E7%94%A8finish%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="btn btn-neutral float-left" title="Activityçš„onCreateä¸­è°ƒç”¨finishçš„ç”Ÿå‘½å‘¨æœŸ"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../%E6%97%A0%E9%9A%9C%E7%A2%8D%E6%9C%8D%E5%8A%A1%E7%A0%94%E7%A9%B6/" class="btn btn-neutral float-right" title="æ— éšœç¢æœåŠ¡ç ”ç©¶">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/simplepeng/blog" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../%E5%9C%A8Activity%E7%9A%84onCreate%E6%96%B9%E6%B3%95%E4%B8%AD%E8%B0%83%E7%94%A8finish%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../%E6%97%A0%E9%9A%9C%E7%A2%8D%E6%9C%8D%E5%8A%A1%E7%A0%94%E7%A9%B6/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(false);
        };
    </script>

</body>
</html>
